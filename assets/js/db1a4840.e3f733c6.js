"use strict";(self.webpackChunkreact_native_iap_docs=self.webpackChunkreact_native_iap_docs||[]).push([[2567],{28453:(e,t,n)=>{n.d(t,{R:()=>o,x:()=>s});var a=n(96540);const r={},i=a.createContext(r);function o(e){const t=a.useContext(i);return a.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function s(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),a.createElement(i.Provider,{value:t},e.children)}},47087:e=>{e.exports=JSON.parse('{"permalink":"/react-native-iap/blog/release-14.6.3","editUrl":"https://github.com/hyochan/react-native-iap/tree/main/docs/blog/2025-12-24-release-14.6.3.md","source":"@site/blog/2025-12-24-release-14.6.3.md","title":"14.6.3 - Advanced Commerce Data & Platform Field Updates","description":"React Native IAP 14.6.3 adds advancedCommerceData support for iOS attribution tracking and introduces the new google/apple platform fields with deprecation of ios/android fields.","date":"2025-12-24T00:00:00.000Z","tags":[{"inline":false,"label":"Release","permalink":"/react-native-iap/blog/tags/release","description":"New version releases and updates"},{"inline":false,"label":"iOS","permalink":"/react-native-iap/blog/tags/ios","description":"iOS platform specific features"},{"inline":false,"label":"Android","permalink":"/react-native-iap/blog/tags/android","description":"Android platform specific features"},{"inline":false,"label":"StoreKit 2","permalink":"/react-native-iap/blog/tags/storekit2","description":"Apple StoreKit 2 framework features"},{"inline":false,"label":"Attribution","permalink":"/react-native-iap/blog/tags/attribution","description":"Attribution and commerce data tracking"}],"readingTime":2.23,"hasTruncateMarker":true,"authors":[{"name":"Hyo","title":"React Native IAP Maintainer","url":"https://github.com/hyochan","page":{"permalink":"/react-native-iap/blog/authors/hyochan"},"socials":{"github":"https://github.com/hyochan","linkedin":"https://www.linkedin.com/in/hyochanjang/","x":"https://x.com/hyodotdev"},"imageURL":"https://github.com/hyochan.png","key":"hyochan"}],"frontMatter":{"slug":"release-14.6.3","title":"14.6.3 - Advanced Commerce Data & Platform Field Updates","authors":["hyochan"],"tags":["release","ios","android","storekit2","attribution"],"description":"React Native IAP 14.6.3 adds advancedCommerceData support for iOS attribution tracking and introduces the new google/apple platform fields with deprecation of ios/android fields.","date":"2025-12-24T00:00:00.000Z"},"unlisted":false,"prevItem":{"title":"14.6.4 - Google Play Billing 8.3.0 External Payments Support","permalink":"/react-native-iap/blog/release-14.6.4"},"nextItem":{"title":"14.6.0 - Billing Programs API & Android Discounts","permalink":"/react-native-iap/blog/release-14.6.0"}}')},96957:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>s,default:()=>p,frontMatter:()=>o,metadata:()=>a,toc:()=>l});var a=n(47087),r=n(74848),i=n(28453);const o={slug:"release-14.6.3",title:"14.6.3 - Advanced Commerce Data & Platform Field Updates",authors:["hyochan"],tags:["release","ios","android","storekit2","attribution"],description:"React Native IAP 14.6.3 adds advancedCommerceData support for iOS attribution tracking and introduces the new google/apple platform fields with deprecation of ios/android fields.",date:new Date("2025-12-24T00:00:00.000Z")},s="React Native IAP 14.6.3",d={authorsImageUrls:[void 0]},l=[{value:"What&#39;s New",id:"whats-new",level:2},{value:"Advanced Commerce Data for iOS",id:"advanced-commerce-data-for-ios",level:3},{value:"New Platform Field Naming: <code>apple</code> and <code>google</code>",id:"new-platform-field-naming-apple-and-google",level:3},{value:"Deprecated: <code>requestPurchaseOnPromotedProductIOS</code>",id:"deprecated-requestpurchaseonpromotedproductios",level:3},{value:"Improved Type Safety for Billing Programs API",id:"improved-type-safety-for-billing-programs-api",level:3},{value:"OpenIAP Updates",id:"openiap-updates",level:2},{value:"Migration Guide",id:"migration-guide",level:2},{value:"Platform Fields",id:"platform-fields",level:3},{value:"Promoted Products (iOS)",id:"promoted-products-ios",level:3},{value:"Installation",id:"installation",level:2}];function c(e){const t={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(t.p,{children:["14.6.3 brings ",(0,r.jsx)(t.strong,{children:"advancedCommerceData"})," support for iOS attribution tracking using StoreKit 2's ",(0,r.jsx)(t.code,{children:"Product.PurchaseOption.custom"}),", along with updated platform field naming conventions and improved type safety for Billing Programs API."]}),"\n",(0,r.jsx)(t.h2,{id:"whats-new",children:"What's New"}),"\n",(0,r.jsx)(t.h3,{id:"advanced-commerce-data-for-ios",children:"Advanced Commerce Data for iOS"}),"\n",(0,r.jsxs)(t.p,{children:["This release adds support for ",(0,r.jsx)(t.code,{children:"advancedCommerceData"})," in iOS purchase requests, enabling attribution tracking through StoreKit 2's custom purchase options."]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-typescript",children:"import {requestPurchase} from 'react-native-iap';\n\nawait requestPurchase({\n  request: {\n    apple: {\n      sku: 'com.example.premium',\n      advancedCommerceData: 'your-attribution-token-here',\n    },\n  },\n  type: 'in-app',\n});\n"})}),"\n",(0,r.jsxs)(t.p,{children:["This feature allows you to pass attribution data to Apple for analytics and marketing attribution purposes. The data is passed through StoreKit 2's ",(0,r.jsx)(t.code,{children:"Product.PurchaseOption.custom"})," API."]}),"\n",(0,r.jsxs)(t.h3,{id:"new-platform-field-naming-apple-and-google",children:["New Platform Field Naming: ",(0,r.jsx)(t.code,{children:"apple"})," and ",(0,r.jsx)(t.code,{children:"google"})]}),"\n",(0,r.jsx)(t.p,{children:"We've introduced new, clearer platform field names for purchase requests:"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"apple"})," (replaces ",(0,r.jsx)(t.code,{children:"ios"}),")"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"google"})," (replaces ",(0,r.jsx)(t.code,{children:"android"}),")"]}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"Before (deprecated):"})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-typescript",children:"await requestPurchase({\n  request: {\n    ios: {sku: 'premium_monthly'},\n    android: {skus: ['premium_monthly']},\n  },\n  type: 'in-app',\n});\n"})}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"After (recommended):"})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-typescript",children:"await requestPurchase({\n  request: {\n    apple: {sku: 'premium_monthly'},\n    google: {skus: ['premium_monthly']},\n  },\n  type: 'in-app',\n});\n"})}),"\n",(0,r.jsxs)(t.p,{children:["The old ",(0,r.jsx)(t.code,{children:"ios"})," and ",(0,r.jsx)(t.code,{children:"android"})," fields are still supported for backward compatibility but are now deprecated. We recommend migrating to the new field names."]}),"\n",(0,r.jsxs)(t.h3,{id:"deprecated-requestpurchaseonpromotedproductios",children:["Deprecated: ",(0,r.jsx)(t.code,{children:"requestPurchaseOnPromotedProductIOS"})]}),"\n",(0,r.jsxs)(t.p,{children:["The ",(0,r.jsx)(t.code,{children:"requestPurchaseOnPromotedProductIOS()"})," function is now deprecated. In StoreKit 2, promoted products can be purchased directly via the standard ",(0,r.jsx)(t.code,{children:"requestPurchase()"})," flow."]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"Before (deprecated):"})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-typescript",children:"// Old approach\nawait requestPurchaseOnPromotedProductIOS();\n"})}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"After (recommended):"})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-typescript",children:"import {promotedProductListenerIOS, requestPurchase} from 'react-native-iap';\n\n// Listen for promoted product taps\npromotedProductListenerIOS(async (product) => {\n  await requestPurchase({\n    request: {apple: {sku: product.id}},\n    type: 'in-app',\n  });\n});\n"})}),"\n",(0,r.jsx)(t.p,{children:"This approach gives you more control over the purchase flow and integrates better with your existing error handling and UI logic."}),"\n",(0,r.jsx)(t.h3,{id:"improved-type-safety-for-billing-programs-api",children:"Improved Type Safety for Billing Programs API"}),"\n",(0,r.jsxs)(t.p,{children:["The Billing Programs API functions now use ",(0,r.jsx)(t.code,{children:"MutationField"})," types for better type inference:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-typescript",children:"// These functions now have improved type safety\nisBillingProgramAvailableAndroid('external-offer');\ncreateBillingProgramReportingDetailsAndroid('external-offer');\nlaunchExternalLinkAndroid({...});\n"})}),"\n",(0,r.jsx)(t.h2,{id:"openiap-updates",children:"OpenIAP Updates"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"openiap-apple"}),": ",(0,r.jsx)(t.a,{href:"https://github.com/hyodotdev/openiap/compare/apple-v1.3.2...apple-v1.3.7",children:"1.3.2 \u2192 1.3.7"})]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"openiap-google"}),": ",(0,r.jsx)(t.a,{href:"https://github.com/hyodotdev/openiap/compare/google-v1.3.14...google-v1.3.16",children:"1.3.14 \u2192 1.3.16"})]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"openiap-gql"}),": ",(0,r.jsx)(t.a,{href:"https://github.com/hyodotdev/openiap/compare/1.3.4...1.3.8",children:"1.3.4 \u2192 1.3.8"})]}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"migration-guide",children:"Migration Guide"}),"\n",(0,r.jsx)(t.h3,{id:"platform-fields",children:"Platform Fields"}),"\n",(0,r.jsx)(t.p,{children:"Update your purchase requests to use the new field names:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-diff",children:"await requestPurchase({\n  request: {\n-   ios: {sku: 'product_id'},\n-   android: {skus: ['product_id']},\n+   apple: {sku: 'product_id'},\n+   google: {skus: ['product_id']},\n  },\n  type: 'in-app',\n});\n"})}),"\n",(0,r.jsx)(t.h3,{id:"promoted-products-ios",children:"Promoted Products (iOS)"}),"\n",(0,r.jsxs)(t.p,{children:["Replace ",(0,r.jsx)(t.code,{children:"requestPurchaseOnPromotedProductIOS()"})," with the listener pattern:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-diff",children:"- await requestPurchaseOnPromotedProductIOS();\n\n+ promotedProductListenerIOS(async (product) => {\n+   await requestPurchase({\n+     request: {apple: {sku: product.id}},\n+     type: 'in-app',\n+   });\n+ });\n"})}),"\n",(0,r.jsx)(t.h2,{id:"installation",children:"Installation"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"npm install react-native-iap react-native-nitro-modules\n# or\nyarn add react-native-iap react-native-nitro-modules\n# or\nbun add react-native-iap react-native-nitro-modules\n"})}),"\n",(0,r.jsxs)(t.p,{children:["Check out the ",(0,r.jsx)(t.a,{href:"/docs/intro",children:"documentation"})," for details on all features."]}),"\n",(0,r.jsxs)(t.p,{children:["Questions or feedback? Reach out via ",(0,r.jsx)(t.a,{href:"https://github.com/hyochan/react-native-iap/issues",children:"GitHub issues"}),"."]})]})}function p(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}}}]);