"use strict";(self.webpackChunkreact_native_iap_docs=self.webpackChunkreact_native_iap_docs||[]).push([[6873],{7178:e=>{e.exports=JSON.parse('{"permalink":"/react-native-iap/blog/release-14.6.0","editUrl":"https://github.com/hyochan/react-native-iap/tree/main/docs/blog/2025-12-11-release-14.6.0-billing-programs.md","source":"@site/blog/2025-12-11-release-14.6.0-billing-programs.md","title":"Release 14.6.0 - Billing Programs API & Android Discounts","description":"React Native IAP 14.6.0 adds Google Play Billing Programs API from Billing Library 8.2.0+ along with full support for one-time product discounts.","date":"2025-12-11T00:00:00.000Z","tags":[{"inline":false,"label":"Release","permalink":"/react-native-iap/blog/tags/release","description":"New version releases and updates"},{"inline":false,"label":"Android","permalink":"/react-native-iap/blog/tags/android","description":"Android platform specific features"},{"inline":true,"label":"billing-programs","permalink":"/react-native-iap/blog/tags/billing-programs"},{"inline":true,"label":"discounts","permalink":"/react-native-iap/blog/tags/discounts"},{"inline":true,"label":"billing-library","permalink":"/react-native-iap/blog/tags/billing-library"}],"readingTime":3.42,"hasTruncateMarker":true,"authors":[{"name":"Hyo","title":"React Native IAP Maintainer","url":"https://github.com/hyochan","page":{"permalink":"/react-native-iap/blog/authors/hyochan"},"socials":{"github":"https://github.com/hyochan","linkedin":"https://www.linkedin.com/in/hyochanjang/","x":"https://x.com/hyodotdev"},"imageURL":"https://github.com/hyochan.png","key":"hyochan"}],"frontMatter":{"slug":"release-14.6.0","title":"Release 14.6.0 - Billing Programs API & Android Discounts","authors":["hyochan"],"tags":["release","android","billing-programs","discounts","billing-library"],"description":"React Native IAP 14.6.0 adds Google Play Billing Programs API from Billing Library 8.2.0+ along with full support for one-time product discounts.","date":"2025-12-11T00:00:00.000Z"},"unlisted":false,"nextItem":{"title":"Release 14.5.0 - Built-in Purchase Verification (aka Receipt Validation)","permalink":"/react-native-iap/blog/release-14.5.0"}}')},7222:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>t,default:()=>p,frontMatter:()=>s,metadata:()=>r,toc:()=>d});var r=i(7178),l=i(4848),a=i(8453);const s={slug:"release-14.6.0",title:"Release 14.6.0 - Billing Programs API & Android Discounts",authors:["hyochan"],tags:["release","android","billing-programs","discounts","billing-library"],description:"React Native IAP 14.6.0 adds Google Play Billing Programs API from Billing Library 8.2.0+ along with full support for one-time product discounts.",date:new Date("2025-12-11T00:00:00.000Z")},t="React Native IAP 14.6.0",o={authorsImageUrls:[void 0]},d=[{value:"What&#39;s New",id:"whats-new",level:2},{value:"Billing Programs API (Android 8.2.0+)",id:"billing-programs-api-android-820",level:3},{value:"New Methods",id:"new-methods",level:4},{value:"One-Time Product Discount Support",id:"one-time-product-discount-support",level:3},{value:"Subscription Replacement Improvements (Android 8.1.0+)",id:"subscription-replacement-improvements-android-810",level:3},{value:"New <code>isSuspendedAndroid</code> Field",id:"new-issuspendedandroid-field",level:3},{value:"Breaking Change",id:"breaking-change",level:2},{value:"<code>oneTimePurchaseOfferDetailsAndroid</code> is now an Array",id:"onetimepurchaseofferdetailsandroid-is-now-an-array",level:3},{value:"New Types",id:"new-types",level:2},{value:"Billing Programs Types",id:"billing-programs-types",level:3},{value:"ProductAndroidOneTimePurchaseOfferDetail",id:"productandroidonetimepurchaseofferdetail",level:3},{value:"OpenIAP Updates",id:"openiap-updates",level:2},{value:"Early Access Installation",id:"early-access-installation",level:2},{value:"References",id:"references",level:2}];function c(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(n.p,{children:["React Native IAP 14.6.0 brings the ",(0,l.jsx)(n.strong,{children:"new Billing Programs API"})," from Google Play Billing Library 8.2.0+, allowing developers to use External Content Links and External Offers. This release also includes full support for ",(0,l.jsx)(n.strong,{children:"one-time product discounts"})," from Billing Library 7.0+ and new purchase status fields from Billing Library 8.1.0+."]}),"\n",(0,l.jsx)(n.admonition,{title:"Small Breaking Change from 14.5.0",type:"note",children:(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"oneTimePurchaseOfferDetailsAndroid"})," is now an ",(0,l.jsx)(n.strong,{children:"array"})," instead of a single object. Please update your code accordingly if you access this field directly."]})}),"\n",(0,l.jsx)(n.h2,{id:"whats-new",children:"What's New"}),"\n",(0,l.jsx)(n.h3,{id:"billing-programs-api-android-820",children:"Billing Programs API (Android 8.2.0+)"}),"\n",(0,l.jsxs)(n.p,{children:["Google Play Billing Library 8.2.0 introduces the new ",(0,l.jsx)(n.strong,{children:"Billing Programs API"})," that replaces the deprecated alternative billing APIs. This API supports:"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"External Content Links"})," - For eligible apps to link to external content"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"External Offers"})," - For eligible apps to offer purchases outside Google Play"]}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"new-methods",children:"New Methods"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-typescript",children:"// Enable a billing program BEFORE calling initConnection\nenableBillingProgramAndroid('external-offer');\nawait initConnection();\n\n// Check if the program is available for this user\nconst result = await isBillingProgramAvailableAndroid('external-offer');\nif (result.isAvailable) {\n  // Program is available\n}\n\n// Get reporting details for external transactions\nconst details = await createBillingProgramReportingDetailsAndroid('external-offer');\n// Use details.externalTransactionToken to report transactions\n\n// Launch external link\nconst success = await launchExternalLinkAndroid({\n  billingProgram: 'external-offer',\n  launchMode: 'launch-in-external-browser-or-app',\n  linkType: 'link-to-digital-content-offer',\n  linkUri: 'https://your-website.com/purchase',\n});\n"})}),"\n",(0,l.jsx)(n.h3,{id:"one-time-product-discount-support",children:"One-Time Product Discount Support"}),"\n",(0,l.jsxs)(n.p,{children:["Google Play Billing Library 7.0+ introduced the ability to offer discounts on one-time (non-subscription) products. This release fully supports these discount features through the new ",(0,l.jsx)(n.code,{children:"oneTimePurchaseOfferDetailsAndroid"})," array."]}),"\n",(0,l.jsx)(n.p,{children:"Each offer in the array can contain:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Discount Display Info"})," - Percentage discount or absolute discount amount"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Limited Quantity Info"})," - Maximum and remaining quantity for limited offers"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Valid Time Window"})," - Start and end times for time-limited offers"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Pre-order Details"})," - Release time for pre-order products"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Rental Details"})," - Rental period and expiration for rental products"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"subscription-replacement-improvements-android-810",children:"Subscription Replacement Improvements (Android 8.1.0+)"}),"\n",(0,l.jsxs)(n.p,{children:["New per-product subscription replacement configuration with ",(0,l.jsx)(n.code,{children:"SubscriptionProductReplacementParamsAndroid"}),":"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-typescript",children:"interface SubscriptionProductReplacementParamsAndroid {\n  oldProductId: string;\n  replacementMode: SubscriptionReplacementModeAndroid;\n}\n"})}),"\n",(0,l.jsxs)(n.p,{children:["Also adds the new ",(0,l.jsx)(n.strong,{children:(0,l.jsx)(n.code,{children:"KeepExisting"})})," replacement mode from Billing Library 8.1.0+, which keeps the existing payment schedule unchanged during subscription upgrades/downgrades."]}),"\n",(0,l.jsxs)(n.h3,{id:"new-issuspendedandroid-field",children:["New ",(0,l.jsx)(n.code,{children:"isSuspendedAndroid"})," Field"]}),"\n",(0,l.jsxs)(n.p,{children:["For subscriptions, we've added the ",(0,l.jsx)(n.code,{children:"isSuspendedAndroid"})," field from Billing Library 8.1.0+. This indicates whether a subscription is currently suspended (e.g., due to payment issues during a grace period)."]}),"\n",(0,l.jsx)(n.h2,{id:"breaking-change",children:"Breaking Change"}),"\n",(0,l.jsxs)(n.h3,{id:"onetimepurchaseofferdetailsandroid-is-now-an-array",children:[(0,l.jsx)(n.code,{children:"oneTimePurchaseOfferDetailsAndroid"})," is now an Array"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Before (14.5.0):"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-typescript",children:"const offer = product.oneTimePurchaseOfferDetailsAndroid;\n// offer is a single object or null\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"After (14.6.0):"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-typescript",children:"const offers = product.oneTimePurchaseOfferDetailsAndroid;\n// offers is an array or null\nconst firstOffer = offers?.[0];\n"})}),"\n",(0,l.jsx)(n.p,{children:"If you were accessing the price directly, update your code:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-typescript",children:"// Before\nconst price = product.oneTimePurchaseOfferDetailsAndroid?.formattedPrice;\n\n// After\nconst price = product.oneTimePurchaseOfferDetailsAndroid?.[0]?.formattedPrice;\n"})}),"\n",(0,l.jsx)(n.h2,{id:"new-types",children:"New Types"}),"\n",(0,l.jsx)(n.h3,{id:"billing-programs-types",children:"Billing Programs Types"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-typescript",children:"type BillingProgramAndroid =\n  | 'unspecified'\n  | 'external-content-link'\n  | 'external-offer';\n\ntype ExternalLinkLaunchModeAndroid =\n  | 'unspecified'\n  | 'launch-in-external-browser-or-app'\n  | 'caller-will-launch-link';\n\ntype ExternalLinkTypeAndroid =\n  | 'unspecified'\n  | 'link-to-digital-content-offer'\n  | 'link-to-app-download';\n\ninterface LaunchExternalLinkParamsAndroid {\n  billingProgram: BillingProgramAndroid;\n  launchMode: ExternalLinkLaunchModeAndroid;\n  linkType: ExternalLinkTypeAndroid;\n  linkUri: string;\n}\n\ninterface BillingProgramAvailabilityResultAndroid {\n  billingProgram: BillingProgramAndroid;\n  isAvailable: boolean;\n}\n\ninterface BillingProgramReportingDetailsAndroid {\n  billingProgram: BillingProgramAndroid;\n  externalTransactionToken: string;\n}\n"})}),"\n",(0,l.jsx)(n.h3,{id:"productandroidonetimepurchaseofferdetail",children:"ProductAndroidOneTimePurchaseOfferDetail"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-typescript",children:"interface ProductAndroidOneTimePurchaseOfferDetail {\n  formattedPrice: string;\n  priceAmountMicros: string;\n  priceCurrencyCode: string;\n  offerId?: string | null;\n  offerToken: string;\n  offerTags: string[];\n  // Discount fields (Billing Library 7.0+)\n  fullPriceMicros?: string | null;\n  discountDisplayInfo?: DiscountDisplayInfoAndroid | null;\n  limitedQuantityInfo?: LimitedQuantityInfoAndroid | null;\n  validTimeWindow?: ValidTimeWindowAndroid | null;\n  preorderDetailsAndroid?: PreorderDetailsAndroid | null;\n  rentalDetailsAndroid?: RentalDetailsAndroid | null;\n}\n"})}),"\n",(0,l.jsx)(n.h2,{id:"openiap-updates",children:"OpenIAP Updates"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"openiap-google"}),": ",(0,l.jsx)(n.a,{href:"https://github.com/hyodotdev/openiap/compare/google-v1.3.10...google-v1.3.12",children:"1.3.10 \u2192 1.3.12"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"openiap-gql"}),": ",(0,l.jsx)(n.a,{href:"https://github.com/hyodotdev/openiap/compare/1.3.0...1.3.2",children:"1.3.0 \u2192 1.3.2"})]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"early-access-installation",children:"Early Access Installation"}),"\n",(0,l.jsxs)(n.p,{children:["Version 14.6 is currently available as a preview release. Install with the ",(0,l.jsx)(n.code,{children:"@next"})," tag:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"npm install react-native-iap@next react-native-nitro-modules\n# or\nyarn add react-native-iap@next react-native-nitro-modules\n# or\nbun add react-native-iap@next react-native-nitro-modules\n"})}),"\n",(0,l.jsxs)(n.p,{children:["Check out the ",(0,l.jsx)(n.a,{href:"/docs/next/intro",children:"14.6 (Next) documentation"})," for details on all upcoming features."]}),"\n",(0,l.jsx)(n.h2,{id:"references",children:"References"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://developer.android.com/google/play/billing/release-notes#8-2-0",children:"Google Play Billing Library 8.2.0 Release Notes"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://developer.android.com/google/play/billing/billing-programs",children:"Google Play Billing Programs"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://developer.android.com/google/play/billing/integrate#one-time-discounts",children:"Google Play One-Time Product Discounts"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"/docs/api/types",children:"Types Documentation"})}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:["Questions or feedback? Reach out via ",(0,l.jsx)(n.a,{href:"https://github.com/hyochan/react-native-iap/issues",children:"GitHub issues"}),"."]})]})}function p(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(c,{...e})}):c(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>s,x:()=>t});var r=i(6540);const l={},a=r.createContext(l);function s(e){const n=r.useContext(a);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:s(e.components),r.createElement(a.Provider,{value:n},e.children)}}}]);