"use strict";(self.webpackChunkreact_native_iap_docs=self.webpackChunkreact_native_iap_docs||[]).push([[2840],{27856:(e,n,i)=>{i.d(n,{I:()=>s,V:()=>r});const r="https://iapkit.com",s="https://www.hyo.dev/api/ad-banner/cmjf0l2460003249hfyh029dm"},28453:(e,n,i)=>{i.d(n,{R:()=>a,x:()=>o});var r=i(96540);const s={},t=r.createContext(s);function a(e){const n=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),r.createElement(t.Provider,{value:n},e.children)}},35159:(e,n,i)=>{i.d(n,{A:()=>o});var r=i(96540),s=i(86025),t=i(27856),a=i(74848);function o({className:e="iapkit-banner",style:n}){const i=(0,s.Ay)("/img/iapkit-banner.gif"),o=(0,r.useCallback)(e=>{fetch(t.I,{method:"POST",mode:"no-cors"}).catch(()=>{})},[]);return(0,a.jsx)("div",{className:e,style:{marginTop:0,marginBottom:12,textAlign:"center",...n},children:(0,a.jsx)("a",{href:t.V,target:"_blank",rel:"noopener noreferrer",onClick:o,style:{display:"inline-block",textDecoration:"none"},children:(0,a.jsx)("img",{src:i,alt:"IapKit - In-App Purchase Validation Service",style:{border:"none",display:"block"}})})})}},97450:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>h,frontMatter:()=>o,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"api/methods/ios-specific","title":"iOS Specific","description":"The following iOS\u2011only helpers expose StoreKit and App Store specific capabilities. Most day\u2011to\u2011day flows are covered by the cross\u2011platform Unified APIs; use these only when you need iOS features.","source":"@site/docs/api/methods/ios-specific.md","sourceDirName":"api/methods","slug":"/api/methods/ios-specific","permalink":"/react-native-iap/docs/api/methods/ios-specific","draft":false,"unlisted":false,"editUrl":"https://github.com/hyochan/react-native-iap/tree/main/docs/docs/api/methods/ios-specific.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"title":"iOS Specific","sidebar_label":"iOS Specific","sidebar_position":4},"sidebar":"tutorialSidebar","previous":{"title":"Listeners","permalink":"/react-native-iap/docs/api/methods/listeners"},"next":{"title":"Android Specific","permalink":"/react-native-iap/docs/api/methods/android-specific"}}');var s=i(74848),t=i(28453),a=i(35159);const o={title:"iOS Specific",sidebar_label:"iOS Specific",sidebar_position:4},c="iOS Specific APIs",l={},d=[{value:"Alternative Billing (iOS 16.0+)",id:"alternative-billing-ios-160",level:2},{value:"Transaction Management",id:"transaction-management",level:2},{value:"clearTransactionIOS()",id:"cleartransactionios",level:3},{value:"getPromotedProductIOS()",id:"getpromotedproductios",level:3},{value:"<del>requestPurchaseOnPromotedProductIOS()</del> (deprecated)",id:"requestpurchaseonpromotedproductios-deprecated",level:3},{value:"getPendingTransactionsIOS()",id:"getpendingtransactionsios",level:3},{value:"isEligibleForIntroOfferIOS()",id:"iseligibleforintroofferios",level:3},{value:"subscriptionStatusIOS()",id:"subscriptionstatusios",level:3},{value:"currentEntitlementIOS()",id:"currententitlementios",level:3},{value:"latestTransactionIOS()",id:"latesttransactionios",level:3},{value:"showManageSubscriptionsIOS()",id:"showmanagesubscriptionsios",level:3},{value:"beginRefundRequestIOS()",id:"beginrefundrequestios",level:3},{value:"isTransactionVerifiedIOS()",id:"istransactionverifiedios",level:3},{value:"getTransactionJwsIOS()",id:"gettransactionjwsios",level:3},{value:"getReceiptDataIOS()",id:"getreceiptdataios",level:3},{value:"syncIOS()",id:"syncios",level:3},{value:"presentCodeRedemptionSheetIOS()",id:"presentcoderedemptionsheetios",level:3},{value:"getAppTransactionIOS()",id:"getapptransactionios",level:3},{value:"When to Use AppTransaction",id:"when-to-use-apptransaction",level:4},{value:"Basic Usage",id:"basic-usage",level:4},{value:"Server-Side Verification",id:"server-side-verification",level:4},{value:"canPresentExternalPurchaseNoticeIOS()",id:"canpresentexternalpurchasenoticeios",level:3},{value:"presentExternalPurchaseNoticeSheetIOS()",id:"presentexternalpurchasenoticesheetios",level:3},{value:"presentExternalPurchaseLinkIOS()",id:"presentexternalpurchaselinkios",level:3}];function p(e){const n={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",del:"del",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"ios-specific-apis",children:"iOS Specific APIs"})}),"\n",(0,s.jsx)(a.A,{}),"\n",(0,s.jsxs)(n.p,{children:["The following iOS\u2011only helpers expose StoreKit and App Store specific capabilities. Most day\u2011to\u2011day flows are covered by the cross\u2011platform ",(0,s.jsx)(n.a,{href:"./unified-apis",children:"Unified APIs"}),"; use these only when you need iOS features."]}),"\n",(0,s.jsx)(n.h2,{id:"alternative-billing-ios-160",children:"Alternative Billing (iOS 16.0+)"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"#canpresentexternalpurchasenoticeios",children:(0,s.jsx)(n.code,{children:"canPresentExternalPurchaseNoticeIOS()"})})," \u2014 Check if notice sheet is available (iOS 18.2+)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"#presentexternalpurchasenoticesheetios",children:(0,s.jsx)(n.code,{children:"presentExternalPurchaseNoticeSheetIOS()"})})," \u2014 Present external purchase notice (iOS 18.2+)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"#presentexternalpurchaselinkios",children:(0,s.jsx)(n.code,{children:"presentExternalPurchaseLinkIOS()"})})," \u2014 Open external purchase link (iOS 16.0+)"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"transaction-management",children:"Transaction Management"}),"\n",(0,s.jsx)(n.h3,{id:"cleartransactionios",children:"clearTransactionIOS()"}),"\n",(0,s.jsx)(n.p,{children:"Clears all pending transactions from the iOS payment queue. Useful if your app previously crashed or missed finishing transactions."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import {clearTransactionIOS, getPendingTransactionsIOS} from 'react-native-iap';\n\n// Inspect then clear\nconst pending = await getPendingTransactionsIOS();\nif (pending.length) {\n  await clearTransactionIOS();\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Returns: ",(0,s.jsx)(n.code,{children:"Promise<void>"})]}),"\n",(0,s.jsx)(n.h3,{id:"getpromotedproductios",children:"getPromotedProductIOS()"}),"\n",(0,s.jsx)(n.p,{children:"Gets the currently promoted product, if any. Requires iOS 11+."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import {getPromotedProductIOS} from 'react-native-iap';\n\nconst promoted = await getPromotedProductIOS();\nif (promoted) {\n  // Show your purchase UI for the promoted product\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Returns: ",(0,s.jsx)(n.code,{children:"Promise<Product | null>"})]}),"\n",(0,s.jsxs)(n.h3,{id:"requestpurchaseonpromotedproductios-deprecated",children:[(0,s.jsx)(n.del,{children:"requestPurchaseOnPromotedProductIOS()"})," (deprecated)"]}),"\n",(0,s.jsx)(n.admonition,{title:"Deprecated",type:"warning",children:(0,s.jsxs)(n.p,{children:["Use ",(0,s.jsx)(n.code,{children:"promotedProductListenerIOS"})," to receive the productId, then call ",(0,s.jsx)(n.code,{children:"requestPurchase"})," with that SKU instead."]})}),"\n",(0,s.jsx)(n.p,{children:"In StoreKit 2, promoted products can be purchased directly via the standard purchase flow:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import {promotedProductListenerIOS, requestPurchase} from 'react-native-iap';\n\n// Recommended approach\nconst subscription = promotedProductListenerIOS(async (productId) => {\n  // Purchase directly using requestPurchase with the received SKU\n  await requestPurchase({\n    request: {apple: {sku: productId}},\n    type: 'in-app',\n  });\n});\n\n// Clean up the listener when done\nsubscription.remove();\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Returns: ",(0,s.jsx)(n.code,{children:"Subscription"})," (with ",(0,s.jsx)(n.code,{children:"remove()"})," method)"]}),"\n",(0,s.jsx)(n.h3,{id:"getpendingtransactionsios",children:"getPendingTransactionsIOS()"}),"\n",(0,s.jsx)(n.p,{children:"Returns all transactions that are pending completion in the StoreKit payment queue."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import {getPendingTransactionsIOS} from 'react-native-iap';\n\nconst pending = await getPendingTransactionsIOS();\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Returns: ",(0,s.jsx)(n.code,{children:"Promise<Purchase[]>"})]}),"\n",(0,s.jsx)(n.h3,{id:"iseligibleforintroofferios",children:"isEligibleForIntroOfferIOS()"}),"\n",(0,s.jsx)(n.p,{children:"Checks if the user is eligible for an introductory offer for a subscription group. Requires iOS 12.2+."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import {isEligibleForIntroOfferIOS, fetchProducts} from 'react-native-iap';\n\n// Example: derive group ID from a fetched subscription product\nconst [sub] = await fetchProducts({skus: ['your_sub_sku'], type: 'subs'});\nconst groupId = sub?.subscriptionInfoIOS?.subscriptionGroupId ?? '';\nconst eligible = groupId ? await isEligibleForIntroOfferIOS(groupId) : false;\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Returns: ",(0,s.jsx)(n.code,{children:"Promise<boolean>"})]}),"\n",(0,s.jsx)(n.h3,{id:"subscriptionstatusios",children:"subscriptionStatusIOS()"}),"\n",(0,s.jsx)(n.p,{children:"Returns detailed subscription status information using StoreKit 2. Requires iOS 15+."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import {subscriptionStatusIOS} from 'react-native-iap';\n\nconst statuses = await subscriptionStatusIOS('your_sub_sku');\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Returns: ",(0,s.jsx)(n.code,{children:"Promise<SubscriptionStatusIOS[]>"})]}),"\n",(0,s.jsx)(n.h3,{id:"currententitlementios",children:"currentEntitlementIOS()"}),"\n",(0,s.jsx)(n.p,{children:"Returns the current entitlement for a given SKU using StoreKit 2. Requires iOS 15+."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import {currentEntitlementIOS} from 'react-native-iap';\n\nconst entitlement = await currentEntitlementIOS('your_sub_or_product_sku');\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Returns: ",(0,s.jsx)(n.code,{children:"Promise<Purchase | null>"})]}),"\n",(0,s.jsx)(n.h3,{id:"latesttransactionios",children:"latestTransactionIOS()"}),"\n",(0,s.jsx)(n.p,{children:"Returns the most recent transaction for a given SKU using StoreKit 2. Requires iOS 15+."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import {latestTransactionIOS} from 'react-native-iap';\n\nconst last = await latestTransactionIOS('your_sku');\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Returns: ",(0,s.jsx)(n.code,{children:"Promise<Purchase | null>"})]}),"\n",(0,s.jsx)(n.h3,{id:"showmanagesubscriptionsios",children:"showManageSubscriptionsIOS()"}),"\n",(0,s.jsx)(n.p,{children:"Opens the native subscription management interface and returns purchases for subscriptions whose auto\u2011renewal status changed while the sheet was open. Requires iOS 15+."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import {showManageSubscriptionsIOS} from 'react-native-iap';\n\nconst changed = await showManageSubscriptionsIOS();\nif (changed.length > 0) {\n  // Update your UI / server using returned purchases\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Returns: ",(0,s.jsx)(n.code,{children:"Promise<Purchase[]>"})]}),"\n",(0,s.jsx)(n.h3,{id:"beginrefundrequestios",children:"beginRefundRequestIOS()"}),"\n",(0,s.jsx)(n.p,{children:"Presents the refund request sheet for a specific SKU. Requires iOS 15+."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import {beginRefundRequestIOS} from 'react-native-iap';\n\nconst status = await beginRefundRequestIOS('your_sku');\n// status: 'success' | 'userCancelled'\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Returns: ",(0,s.jsx)(n.code,{children:"Promise<'success' | 'userCancelled'>"})]}),"\n",(0,s.jsx)(n.h3,{id:"istransactionverifiedios",children:"isTransactionVerifiedIOS()"}),"\n",(0,s.jsx)(n.p,{children:"Verifies the latest transaction for a given SKU using StoreKit 2. Requires iOS 15+."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import {isTransactionVerifiedIOS} from 'react-native-iap';\n\nconst ok = await isTransactionVerifiedIOS('your_sku');\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Returns: ",(0,s.jsx)(n.code,{children:"Promise<boolean>"})]}),"\n",(0,s.jsx)(n.h3,{id:"gettransactionjwsios",children:"getTransactionJwsIOS()"}),"\n",(0,s.jsx)(n.p,{children:"Returns the JSON Web Signature (JWS) for a transaction derived from a given SKU. Use this for server\u2011side validation. Requires iOS 15+."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import {getTransactionJwsIOS} from 'react-native-iap';\n\nconst jws = await getTransactionJwsIOS('your_sku');\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Returns: ",(0,s.jsx)(n.code,{children:"Promise<string>"})]}),"\n",(0,s.jsx)(n.h3,{id:"getreceiptdataios",children:"getReceiptDataIOS()"}),"\n",(0,s.jsx)(n.p,{children:"Returns the base64\u2011encoded receipt data for server validation."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import {getReceiptDataIOS} from 'react-native-iap';\n\nconst receipt = await getReceiptDataIOS();\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Returns: ",(0,s.jsx)(n.code,{children:"Promise<string>"})]}),"\n",(0,s.jsx)(n.h3,{id:"syncios",children:"syncIOS()"}),"\n",(0,s.jsx)(n.p,{children:"Forces a sync with StoreKit to ensure all transactions are up to date. Requires iOS 15+."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import {syncIOS} from 'react-native-iap';\n\nawait syncIOS();\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Returns: ",(0,s.jsx)(n.code,{children:"Promise<void>"})]}),"\n",(0,s.jsx)(n.h3,{id:"presentcoderedemptionsheetios",children:"presentCodeRedemptionSheetIOS()"}),"\n",(0,s.jsx)(n.p,{children:"Presents the system sheet for redeeming App Store promo/offer codes."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import {presentCodeRedemptionSheetIOS} from 'react-native-iap';\n\nawait presentCodeRedemptionSheetIOS();\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Returns: ",(0,s.jsx)(n.code,{children:"Promise<boolean>"})]}),"\n",(0,s.jsx)(n.h3,{id:"getapptransactionios",children:"getAppTransactionIOS()"}),"\n",(0,s.jsxs)(n.p,{children:["Gets app transaction information for iOS apps (iOS 16.0+). AppTransaction represents the ",(0,s.jsx)(n.strong,{children:"initial purchase that unlocked the app"})," - Apple's way of proving the app was legitimately downloaded from the App Store."]}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Runtime: iOS 16.0+; Build: Xcode 15.0+ with iOS 16.0 SDK. Older SDKs will throw."}),"\n"]}),"\n",(0,s.jsx)(n.admonition,{title:"Important",type:"warning",children:(0,s.jsxs)(n.p,{children:["AppTransaction is ",(0,s.jsx)(n.strong,{children:"not"})," for payment verification. It is a ",(0,s.jsx)(n.strong,{children:"trust/authenticity layer"}),". For payment verification, use ",(0,s.jsx)(n.a,{href:"../../guides/subscription-validation",children:"Transaction verification"})," or server-side receipt validation."]})}),"\n",(0,s.jsx)(n.h4,{id:"when-to-use-apptransaction",children:"When to Use AppTransaction"}),"\n",(0,s.jsxs)(n.p,{children:["Most apps do ",(0,s.jsx)(n.strong,{children:"not"})," need this. Use only when:"]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Scenario"}),(0,s.jsx)(n.th,{children:"Why It Helps"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Free app with IAP + cracking concerns"}),(0,s.jsx)(n.td,{children:"Verifies app was installed via App Store, not side-loaded"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Enterprise/Compliance requirements"}),(0,s.jsx)(n.td,{children:"Apple-signed proof of app ownership for audits"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Anti-fraud signal in high-value apps"}),(0,s.jsx)(n.td,{children:"Additional trust signal for fraud detection"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Games with cheating concerns"}),(0,s.jsx)(n.td,{children:"Helps identify modified/unofficial builds"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Do NOT use for:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Paid apps (purchase already verified at download)"}),"\n",(0,s.jsx)(n.li,{children:"Standard subscription apps (Transaction verification is sufficient)"}),"\n",(0,s.jsx)(n.li,{children:'"Better payment verification" (AppTransaction has no payment data)'}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"basic-usage",children:"Basic Usage"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"import {getAppTransactionIOS} from 'react-native-iap';\nimport {Platform} from 'react-native';\n\nconst verifyAppAuthenticity = async () => {\n  if (Platform.OS !== 'ios') return null;\n\n  try {\n    const appTransaction = await getAppTransactionIOS();\n\n    if (!appTransaction) {\n      // Unverified - could be sandbox, TestFlight, or tampered\n      console.warn('App transaction could not be verified');\n      return null;\n    }\n\n    console.log('App verified:', {\n      bundleId: appTransaction.bundleId,\n      environment: appTransaction.environment,\n      originalPurchaseDate: new Date(appTransaction.originalPurchaseDate),\n    });\n\n    return appTransaction;\n  } catch (error) {\n    console.error('Failed to get app transaction:', error);\n    return null;\n  }\n};\n"})}),"\n",(0,s.jsx)(n.h4,{id:"server-side-verification",children:"Server-Side Verification"}),"\n",(0,s.jsxs)(n.p,{children:["For robust anti-fraud, send ",(0,s.jsx)(n.code,{children:"deviceVerification"})," and ",(0,s.jsx)(n.code,{children:"deviceVerificationNonce"})," to your server:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"const appTransaction = await getAppTransactionIOS();\n\nif (appTransaction) {\n  await fetch('https://your-server.com/verify-app', {\n    method: 'POST',\n    headers: {'Content-Type': 'application/json'},\n    body: JSON.stringify({\n      deviceVerification: appTransaction.deviceVerification,\n      deviceVerificationNonce: appTransaction.deviceVerificationNonce,\n      bundleId: appTransaction.bundleId,\n      environment: appTransaction.environment,\n    }),\n  });\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:"On your server: verify the signature using Apple's public key, check bundleId matches, validate environment, and store the nonce to prevent replay attacks."}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Returns:"})," ",(0,s.jsx)(n.code,{children:"Promise<AppTransaction | null>"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:'interface AppTransaction {\n  appId: number;                    // App Store app identifier\n  appTransactionId?: string;        // Unique transaction ID (iOS 18.4+)\n  appVersion: string;               // Current app version\n  appVersionId: number;             // App version identifier\n  bundleId: string;                 // App bundle identifier\n  deviceVerification: string;       // Base64 device verification data\n  deviceVerificationNonce: string;  // UUID for server verification\n  environment: string;              // "Production" or "Sandbox"\n  originalAppVersion: string;       // First installed version\n  originalPlatform?: string;        // Original purchase platform (iOS 18.4+)\n  originalPurchaseDate: number;     // Initial download timestamp (ms)\n  preorderDate?: number;            // Pre-order date if applicable (ms)\n  signedDate: number;               // When data was signed (ms)\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"canpresentexternalpurchasenoticeios",children:"canPresentExternalPurchaseNoticeIOS()"}),"\n",(0,s.jsx)(n.p,{children:"Check if the device can present an external purchase notice sheet. Requires iOS 18.2+."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import {canPresentExternalPurchaseNoticeIOS} from 'react-native-iap';\n\nconst canPresent = await canPresentExternalPurchaseNoticeIOS();\nif (canPresent) {\n  console.log('External purchase notice sheet is available');\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Returns:"})," ",(0,s.jsx)(n.code,{children:"Promise<boolean>"})]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Platform:"})," iOS 18.2+"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Note:"})," This notice sheet must be presented before redirecting users to external purchase links on iOS 18.2+."]}),"\n",(0,s.jsx)(n.h3,{id:"presentexternalpurchasenoticesheetios",children:"presentExternalPurchaseNoticeSheetIOS()"}),"\n",(0,s.jsx)(n.p,{children:"Present an external purchase notice sheet to inform users about external purchases. This must be called before opening an external purchase link on iOS 18.2+."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import {presentExternalPurchaseNoticeSheetIOS} from 'react-native-iap';\n\nconst result = await presentExternalPurchaseNoticeSheetIOS();\n\nif (result.error) {\n  console.error('Failed to present notice:', result.error);\n} else if (result.result === 'continue') {\n  // User chose to continue to external purchase\n  console.log('User accepted external purchase notice');\n} else if (result.result === 'dismissed') {\n  // User dismissed the sheet\n  console.log('User dismissed notice');\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Returns:"})," ",(0,s.jsx)(n.code,{children:"Promise<ExternalPurchaseNoticeResultIOS>"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"interface ExternalPurchaseNoticeResultIOS {\n  error: string | null;\n  result: 'continue' | 'dismissed';\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Platform:"})," iOS 18.2+"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"See also:"})," ",(0,s.jsx)(n.a,{href:"https://developer.apple.com/documentation/storekit/external-purchase",children:"StoreKit External Purchase documentation"})]}),"\n",(0,s.jsx)(n.h3,{id:"presentexternalpurchaselinkios",children:"presentExternalPurchaseLinkIOS()"}),"\n",(0,s.jsx)(n.p,{children:"Open an external purchase link in Safari to redirect users to your website for purchase. Requires iOS 16.0+."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import {presentExternalPurchaseLinkIOS} from 'react-native-iap';\n\nconst result = await presentExternalPurchaseLinkIOS(\n  'https://your-site.com/checkout',\n);\n\nif (result.error) {\n  console.error('Failed to open link:', result.error);\n} else if (result.success) {\n  console.log('User redirected to external purchase website');\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"url"})," (string): The external purchase URL to open"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Returns:"})," ",(0,s.jsx)(n.code,{children:"Promise<ExternalPurchaseLinkResultIOS>"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"interface ExternalPurchaseLinkResultIOS {\n  error: string | null;\n  success: boolean;\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Platform:"})," iOS 16.0+"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Requirements:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Must configure ",(0,s.jsx)(n.code,{children:"iosAlternativeBilling"})," in your Expo config plugin"]}),"\n",(0,s.jsx)(n.li,{children:"Requires Apple approval and proper provisioning profile with external purchase entitlements"}),"\n",(0,s.jsx)(n.li,{children:"URLs must be configured in Info.plist via the config plugin"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Example Config:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"// app.config.ts\nexport default {\n  plugins: [\n    [\n      'react-native-iap',\n      {\n        iosAlternativeBilling: {\n          countries: ['kr', 'nl'], // ISO 3166-1 alpha-2\n          links: {\n            kr: 'https://your-site.com/kr',\n            nl: 'https://your-site.com/nl',\n          },\n          enableExternalPurchaseLink: true,\n        },\n      },\n    ],\n  ],\n};\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"See also:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://developer.apple.com/documentation/storekit/external-purchase",children:"StoreKit External Purchase documentation"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/docs/guides/expo-plugin",children:"Config Plugin Guide"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(p,{...e})}):p(e)}}}]);