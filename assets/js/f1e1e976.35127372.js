"use strict";(self.webpackChunkreact_native_iap_docs=self.webpackChunkreact_native_iap_docs||[]).push([[9991],{1850:(e,n,i)=>{i.d(n,{A:()=>o});i(6540);var r=i(6025),t=i(4848);const s={default:{url:"https://www.greatfrontend.com?fpr=hyo73"},coding:{url:"https://www.greatfrontend.com/prepare/coding?fpr=hyo73",title:"Coding Interview Questions",description:"Practice coding problems for technical interviews"},quiz:{url:"https://www.greatfrontend.com/questions/formats/quiz?fpr=hyo73",title:"Quiz Interview Questions",description:"Test your knowledge with quiz-style questions"},"system-design":{url:"https://www.greatfrontend.com/questions/formats/system-design?fpr=hyo73",title:"Front End System Design Questions",description:"Master system design for frontend applications"},behavioral:{url:"https://www.greatfrontend.com/behavioral-interview-playbook?fpr=hyo73",title:"Behavioral Interview Questions",description:"Prepare for behavioral interview questions"},"interview-guide":{url:"https://www.greatfrontend.com/front-end-interview-playbook?fpr=hyo73",title:"Front End Interview Guidebook",description:"Complete guide to frontend interviews"},"system-design-guide":{url:"https://www.greatfrontend.com/front-end-system-design-playbook?fpr=hyo73",title:"Front End System Design Guidebook",description:"Comprehensive system design guide"},"study-plan":{url:"https://www.greatfrontend.com/interviews/study-plans?fpr=hyo73",title:"Study Plan",description:"Structured learning paths for interview preparation"},questions:{url:"https://www.greatfrontend.com/questions?fpr=hyo73",title:"Framework-specific Practice Questions",description:"Practice questions for popular frameworks"},javascript:{url:"https://www.greatfrontend.com/questions/js?fpr=hyo73",title:"JavaScript Interview Questions",description:"Master JavaScript for technical interviews"},react:{url:"https://www.greatfrontend.com/questions/react?fpr=hyo73",title:"React Interview Questions",description:"Prepare for React-specific interviews"}};function o({type:e="default",className:n="greatfrontend-banner",style:i}){const o=s[e],a=(0,r.Ay)("/img/greatfrontend-js.gif");return(0,t.jsxs)("div",{className:n,style:{marginTop:0,marginBottom:12,textAlign:"center",...i},children:[(0,t.jsx)("a",{href:o.url,target:"_blank",rel:"noopener noreferrer",style:{display:"inline-block",textDecoration:"none"},children:(0,t.jsx)("img",{src:a,alt:"GreatFrontEnd",style:{maxWidth:"100%",height:"auto",border:"none",display:"block"}})}),o.title&&(0,t.jsx)("div",{style:{marginTop:0,fontSize:"0.85em"},children:(0,t.jsx)("a",{href:o.url,target:"_blank",rel:"noopener noreferrer",style:{color:"var(--ifm-color-primary)",textDecoration:"underline",fontWeight:500,cursor:"pointer"},onMouseEnter:e=>{e.currentTarget.style.textDecoration="underline",e.currentTarget.style.opacity="0.8"},onMouseLeave:e=>{e.currentTarget.style.textDecoration="underline",e.currentTarget.style.opacity="1"},children:o.title})})]})}},2725:(e,n,i)=>{i.d(n,{A:()=>a});var r=i(1850),t=i(6540),s=i(4848);const o=["coding","quiz","system-design","behavioral","interview-guide","system-design-guide","study-plan","questions","javascript","react"];function a(){const e=(0,t.useMemo)(()=>{const e=Math.floor(Math.random()*o.length);return o[e]},[]);return(0,s.jsx)(r.A,{type:e})}},7491:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>h,frontMatter:()=>a,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"examples/basic-store","title":"Basic Store Implementation","description":"This example shows how to implement a basic in-app purchase store using react-native-iap.","source":"@site/versioned_docs/version-14.2/examples/basic-store.md","sourceDirName":"examples","slug":"/examples/basic-store","permalink":"/react-native-iap/docs/14.2/examples/basic-store","draft":false,"unlisted":false,"editUrl":"https://github.com/hyochan/react-native-iap/tree/main/docs/versioned_docs/version-14.2/examples/basic-store.md","tags":[],"version":"14.2","sidebarPosition":1,"frontMatter":{"title":"Basic Store Implementation","sidebar_label":"Basic Store","sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"Support","permalink":"/react-native-iap/docs/14.2/guides/support"},"next":{"title":"Complete Purchase","permalink":"/react-native-iap/docs/14.2/examples/complete-impl"}}');var t=i(4848),s=i(8453),o=i(2725);const a={title:"Basic Store Implementation",sidebar_label:"Basic Store",sidebar_position:1},c="Basic Store Implementation",l={},d=[{value:"Key Features Demonstrated",id:"key-features-demonstrated",level:2},{value:"1. Connection Management",id:"1-connection-management",level:3},{value:"2. Product Loading",id:"2-product-loading",level:3},{value:"3. Purchase Flow",id:"3-purchase-flow",level:3},{value:"4. Receipt Validation",id:"4-receipt-validation",level:3},{value:"5. User Experience",id:"5-user-experience",level:3},{value:"Platform Differences",id:"platform-differences",level:2},{value:"Purchase Request Parameters",id:"purchase-request-parameters",level:3},{value:"Key iOS Options",id:"key-ios-options",level:3},{value:"Purchase Object Properties",id:"purchase-object-properties",level:3},{value:"Receipt Validation",id:"receipt-validation",level:3},{value:"Usage",id:"usage",level:2},{value:"Customization",id:"customization",level:2},{value:"Next Steps",id:"next-steps",level:2}];function p(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"basic-store-implementation",children:"Basic Store Implementation"})}),"\n",(0,t.jsx)(o.A,{}),"\n",(0,t.jsx)(n.p,{children:"This example shows how to implement a basic in-app purchase store using react-native-iap."}),"\n",(0,t.jsx)(n.h2,{id:"key-features-demonstrated",children:"Key Features Demonstrated"}),"\n",(0,t.jsx)(n.h3,{id:"1-connection-management",children:"1. Connection Management"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Automatic connection handling with ",(0,t.jsx)(n.code,{children:"useIAP"})]}),"\n",(0,t.jsx)(n.li,{children:"Loading states for connection and products"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"2-product-loading",children:"2. Product Loading"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Loading both products and subscriptions"}),"\n",(0,t.jsx)(n.li,{children:"Error handling for failed product fetches"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"3-purchase-flow",children:"3. Purchase Flow"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Initiating purchases with ",(0,t.jsx)(n.code,{children:"requestPurchase"})]}),"\n",(0,t.jsx)(n.li,{children:"Handling purchase updates and errors"}),"\n",(0,t.jsx)(n.li,{children:"Proper transaction finishing"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"4-receipt-validation",children:"4. Receipt Validation"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Server-side receipt validation with platform-specific handling"}),"\n",(0,t.jsx)(n.li,{children:"Error handling for validation failures"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"5-user-experience",children:"5. User Experience"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Visual feedback for purchase states"}),"\n",(0,t.jsx)(n.li,{children:"Appropriate error messages"}),"\n",(0,t.jsx)(n.li,{children:"Loading indicators"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"platform-differences",children:"Platform Differences"}),"\n",(0,t.jsx)(n.h3,{id:"purchase-request-parameters",children:"Purchase Request Parameters"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Important"}),": iOS and Android have completely different parameter structures for ",(0,t.jsx)(n.code,{children:"requestPurchase"}),":"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Unified Structure (v2.7.0+):"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"await requestPurchase({\n  request: {\n    ios: {\n      sku: productId,\n      andDangerouslyFinishTransactionAutomatically: false,\n    },\n    android: {\n      skus: [productId],\n    },\n  },\n});\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Platform-specific Implementation (v2.7.0+):"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"// New API (v2.7.0+) - No Platform.OS checks needed!\nawait requestPurchase({\n  request: {\n    ios: {\n      sku: productId,\n      // Set to false for manual transaction finishing\n      andDangerouslyFinishTransactionAutomatically: false,\n    },\n    android: {\n      skus: [productId],\n    },\n  },\n});\n"})}),"\n",(0,t.jsx)(n.h3,{id:"key-ios-options",children:"Key iOS Options"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"andDangerouslyFinishTransactionAutomatically: false"})}),":","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Recommended"}),": Set to ",(0,t.jsx)(n.code,{children:"false"})," to manually handle transaction finishing"]}),"\n",(0,t.jsx)(n.li,{children:"This allows proper receipt validation before completing the transaction"}),"\n",(0,t.jsx)(n.li,{children:"Prevents race conditions and ensures proper purchase flow"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"purchase-object-properties",children:"Purchase Object Properties"}),"\n",(0,t.jsx)(n.p,{children:"Purchase objects have different properties on iOS and Android. When accessing platform-specific properties, TypeScript type casting is required:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"// \u2705 New unified approach (recommended)\nconst purchaseToken = purchase.purchaseToken; // Works on both iOS and Android\n\n// \u274c Old platform-specific approach (deprecated)\n// const purchaseToken = (purchase as ProductPurchaseAndroid).purchaseTokenAndroid;\n// const jwsToken = (purchase as ProductPurchaseIos).jwsRepresentationIos;\n\n// Platform-specific fields that are still needed\nconst packageName = (purchase as ProductPurchaseAndroid).packageNameAndroid;\nconst transactionReceipt = purchase.transactionReceipt; // Available on both platforms\n"})}),"\n",(0,t.jsx)(n.h3,{id:"receipt-validation",children:"Receipt Validation"}),"\n",(0,t.jsx)(n.p,{children:"Receipt validation requires different approaches:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"iOS"}),": Send ",(0,t.jsx)(n.code,{children:"transactionReceipt"})," to Apple's validation servers"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Android"}),": Send ",(0,t.jsx)(n.code,{children:"purchaseToken"})," (unified field) and ",(0,t.jsx)(n.code,{children:"packageName"})," to Google Play validation"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["This is handled in the ",(0,t.jsx)(n.code,{children:"validatePurchase"})," function with platform-specific logic."]}),"\n",(0,t.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"import React from 'react';\nimport {NavigationContainer} from '@react-navigation/native';\nimport Store from './Store';\n\nexport default function App() {\n  return (\n    <NavigationContainer>\n      <Store />\n    </NavigationContainer>\n  );\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"customization",children:"Customization"}),"\n",(0,t.jsx)(n.p,{children:"You can customize this example by:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Styling"}),": Modify the ",(0,t.jsx)(n.code,{children:"styles"})," object to match your app's design"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Product IDs"}),": Update ",(0,t.jsx)(n.code,{children:"PRODUCT_IDS"})," and ",(0,t.jsx)(n.code,{children:"SUBSCRIPTION_IDS"})," with your actual product IDs"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Validation"}),": Implement proper server-side receipt validation"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Error Handling"}),": Add more specific error handling for your use case"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Features"}),": Add features like purchase restoration, subscription management, etc."]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Implement proper ",(0,t.jsx)(n.a,{href:"../guides/purchases#receipt-validation",children:"receipt validation"})]}),"\n",(0,t.jsxs)(n.li,{children:["Add ",(0,t.jsx)(n.a,{href:"../guides/purchases#purchase-restoration",children:"purchase restoration"})]}),"\n",(0,t.jsxs)(n.li,{children:["Handle ",(0,t.jsx)(n.a,{href:"../api/methods/core-methods#deeplinktosubscriptions",children:"subscription management"})]}),"\n",(0,t.jsxs)(n.li,{children:["Add comprehensive ",(0,t.jsx)(n.a,{href:"../guides/troubleshooting",children:"error handling"})]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(p,{...e})}):p(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>a});var r=i(6540);const t={},s=r.createContext(t);function o(e){const n=r.useContext(s);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);