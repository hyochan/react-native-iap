"use strict";(self.webpackChunkreact_native_iap_docs=self.webpackChunkreact_native_iap_docs||[]).push([[5343],{6288:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>p,frontMatter:()=>d,metadata:()=>s,toc:()=>c});var s=i(9459),r=i(4848),t=i(8453);const d={slug:"14.7.4-android-input-naming",title:"14.7.4 - Android Input Type Field Naming Simplification",authors:["hyochan"],tags:["release","openiap","android","billing","breaking-change"],date:new Date("2026-01-20T00:00:00.000Z")},o="14.7.4 Release Notes",a={authorsImageUrls:[void 0]},c=[{value:"Breaking Changes",id:"breaking-changes",level:2},{value:"Simplified Field Names in Android Input Types",id:"simplified-field-names-in-android-input-types",level:3},{value:"Migration Guide",id:"migration-guide",level:3},{value:"Important: Response Types Keep Suffixes",id:"important-response-types-keep-suffixes",level:3},{value:"New Features",id:"new-features",level:2},{value:"One-Time Purchase Discount Offers (Android 7.0+)",id:"one-time-purchase-discount-offers-android-70",level:3},{value:"Naming Convention Summary",id:"naming-convention-summary",level:2},{value:"OpenIAP Versions",id:"openiap-versions",level:2}];function l(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.p,{children:["This release simplifies field naming in Android input types (",(0,r.jsx)(n.code,{children:"RequestPurchaseAndroidProps"})," and ",(0,r.jsx)(n.code,{children:"RequestSubscriptionAndroidProps"}),"). Since these types are already Android-specific, their fields no longer need the ",(0,r.jsx)(n.code,{children:"Android"})," suffix."]}),"\n",(0,r.jsx)(n.h2,{id:"breaking-changes",children:"Breaking Changes"}),"\n",(0,r.jsx)(n.h3,{id:"simplified-field-names-in-android-input-types",children:"Simplified Field Names in Android Input Types"}),"\n",(0,r.jsx)(n.p,{children:"Fields inside platform-specific input types no longer require the platform suffix. The parent type name already indicates the platform context."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Why this change?"})}),"\n",(0,r.jsxs)(n.p,{children:["When you write ",(0,r.jsx)(n.code,{children:'google: { offerToken: "..." }'}),", the ",(0,r.jsx)(n.code,{children:"google"})," key already tells you this is Android-specific. Adding ",(0,r.jsx)(n.code,{children:"Android"})," suffix to fields inside is redundant:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:'// Redundant - we know it\'s Android from the parent\ngoogle: { offerTokenAndroid: "..." }\n\n// Cleaner - parent context is sufficient\ngoogle: { offerToken: "..." }\n'})}),"\n",(0,r.jsx)(n.h3,{id:"migration-guide",children:"Migration Guide"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Old Name (v14.7.3)"}),(0,r.jsx)(n.th,{children:"New Name (v14.7.4)"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"obfuscatedAccountIdAndroid"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"obfuscatedAccountId"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"obfuscatedProfileIdAndroid"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"obfuscatedProfileId"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"purchaseTokenAndroid"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"purchaseToken"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"replacementModeAndroid"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"replacementMode"})})]})]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Before (v14.7.3):"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"await requestPurchase({\n  request: {\n    google: {\n      skus: ['subscription_id'],\n      subscriptionOffers: [{sku: 'subscription_id', offerToken: 'token'}],\n      purchaseTokenAndroid: currentPurchaseToken,\n      replacementModeAndroid: 1,\n      obfuscatedAccountIdAndroid: 'user_123',\n    },\n  },\n  type: 'subs',\n});\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"After (v14.7.4):"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"await requestPurchase({\n  request: {\n    google: {\n      skus: ['subscription_id'],\n      subscriptionOffers: [{sku: 'subscription_id', offerToken: 'token'}],\n      purchaseToken: currentPurchaseToken,\n      replacementMode: 1,\n      obfuscatedAccountId: 'user_123',\n    },\n  },\n  type: 'subs',\n});\n"})}),"\n",(0,r.jsx)(n.h3,{id:"important-response-types-keep-suffixes",children:"Important: Response Types Keep Suffixes"}),"\n",(0,r.jsxs)(n.p,{children:["The suffix removal only applies to ",(0,r.jsx)(n.strong,{children:"input types"})," (request parameters). Response types still use suffixes because they're cross-platform:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"// Response fields KEEP the Android suffix\nconst purchase = purchases[0] as PurchaseAndroid;\n\n// These response fields still have Android suffix\nconsole.log(purchase.purchaseTokenAndroid);       // Keep suffix\nconsole.log(purchase.obfuscatedAccountIdAndroid); // Keep suffix\n\n// But input fields don't need it anymore\nawait requestPurchase({\n  request: {\n    google: {\n      skus: [product.id],\n      obfuscatedAccountId: 'user_123',      // Input: no suffix\n    },\n  },\n  type: 'in-app',\n});\n"})}),"\n",(0,r.jsx)(n.h2,{id:"new-features",children:"New Features"}),"\n",(0,r.jsx)(n.h3,{id:"one-time-purchase-discount-offers-android-70",children:"One-Time Purchase Discount Offers (Android 7.0+)"}),"\n",(0,r.jsx)(n.p,{children:"This release adds support for discount offers on one-time (in-app) purchases:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import {fetchProducts, requestPurchase} from 'react-native-iap';\nimport type {ProductAndroid} from 'react-native-iap';\n\n// 1. Fetch products with discount offers\nconst products = await fetchProducts({\n  skus: ['premium_upgrade'],\n  type: 'in-app',\n});\n\nconst product = products[0] as ProductAndroid;\n\n// 2. Get the discount offer\nconst discountOffer = product.discountOffers?.[0];\n\n// 3. Purchase with the discount\nif (discountOffer?.offerTokenAndroid) {\n  await requestPurchase({\n    request: {\n      google: {\n        skus: [product.id],\n        offerToken: discountOffer.offerTokenAndroid,  // Use simplified input field\n      },\n    },\n    type: 'in-app',\n  });\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"naming-convention-summary",children:"Naming Convention Summary"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Field Location"}),(0,r.jsx)(n.th,{children:"Suffix Required?"}),(0,r.jsx)(n.th,{children:"Example"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsxs)(n.td,{children:["Inside ",(0,r.jsx)(n.code,{children:"RequestPurchaseAndroidProps"})]}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"NO"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"offerToken"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsxs)(n.td,{children:["Inside ",(0,r.jsx)(n.code,{children:"RequestSubscriptionAndroidProps"})]}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"NO"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"purchaseToken"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Cross-platform response type"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"YES"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"PurchaseAndroid.purchaseTokenAndroid"})})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"openiap-versions",children:"OpenIAP Versions"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Package"}),(0,r.jsx)(n.th,{children:"Version"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"openiap-gql"}),(0,r.jsx)(n.td,{children:"1.3.15"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"openiap-google"}),(0,r.jsx)(n.td,{children:"1.3.26"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"openiap-apple"}),(0,r.jsx)(n.td,{children:"1.3.13"})]})]})]}),"\n",(0,r.jsxs)(n.p,{children:["For detailed changes, see the ",(0,r.jsx)(n.a,{href:"https://www.openiap.dev/docs/updates/notes",children:"OpenIAP Release Notes"}),"."]})]})}function p(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>d,x:()=>o});var s=i(6540);const r={},t=s.createContext(r);function d(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:d(e.components),s.createElement(t.Provider,{value:n},e.children)}},9459:e=>{e.exports=JSON.parse('{"permalink":"/react-native-iap/blog/14.7.4-android-input-naming","editUrl":"https://github.com/hyochan/react-native-iap/tree/main/docs/blog/2026-01-20-14.7.4-android-input-naming.md","source":"@site/blog/2026-01-20-14.7.4-android-input-naming.md","title":"14.7.4 - Android Input Type Field Naming Simplification","description":"This release simplifies field naming in Android input types (RequestPurchaseAndroidProps and RequestSubscriptionAndroidProps). Since these types are already Android-specific, their fields no longer need the Android suffix.","date":"2026-01-20T00:00:00.000Z","tags":[{"inline":false,"label":"Release","permalink":"/react-native-iap/blog/tags/release","description":"New version releases and updates"},{"inline":true,"label":"openiap","permalink":"/react-native-iap/blog/tags/openiap"},{"inline":false,"label":"Android","permalink":"/react-native-iap/blog/tags/android","description":"Android platform specific features"},{"inline":true,"label":"billing","permalink":"/react-native-iap/blog/tags/billing"},{"inline":false,"label":"Breaking Change","permalink":"/react-native-iap/blog/tags/breaking-change","description":"Changes that require code updates"}],"readingTime":1.86,"hasTruncateMarker":false,"authors":[{"name":"Hyo","title":"React Native IAP Maintainer","url":"https://github.com/hyochan","page":{"permalink":"/react-native-iap/blog/authors/hyochan"},"socials":{"github":"https://github.com/hyochan","linkedin":"https://www.linkedin.com/in/hyochanjang/","x":"https://x.com/hyodotdev"},"imageURL":"https://github.com/hyochan.png","key":"hyochan"}],"frontMatter":{"slug":"14.7.4-android-input-naming","title":"14.7.4 - Android Input Type Field Naming Simplification","authors":["hyochan"],"tags":["release","openiap","android","billing","breaking-change"],"date":"2026-01-20T00:00:00.000Z"},"unlisted":false,"nextItem":{"title":"14.7.3 - Google Play Billing Library 8.0+ Features","permalink":"/react-native-iap/blog/release-14.7.3-billing-library-8"}}')}}]);