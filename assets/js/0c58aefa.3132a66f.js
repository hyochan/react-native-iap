"use strict";(self.webpackChunkreact_native_iap_docs=self.webpackChunkreact_native_iap_docs||[]).push([[5514],{28453:(e,n,i)=>{i.d(n,{R:()=>a,x:()=>s});var l=i(96540);const r={},t=l.createContext(r);function a(e){const n=l.useContext(t);return l.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),l.createElement(t.Provider,{value:n},e.children)}},29477:e=>{e.exports=JSON.parse('{"permalink":"/react-native-iap/blog/release-14.6.4","editUrl":"https://github.com/hyochan/react-native-iap/tree/main/docs/blog/2025-12-28-release-14.6.4.md","source":"@site/blog/2025-12-28-release-14.6.4.md","title":"14.6.4 - Google Play Billing 8.3.0 External Payments Support","description":"React Native IAP 14.6.4 adds support for Google Play Billing Library 8.3.0 External Payments program, enabling side-by-side payment choice in Japan.","date":"2025-12-28T00:00:00.000Z","tags":[{"inline":false,"label":"Release","permalink":"/react-native-iap/blog/tags/release","description":"New version releases and updates"},{"inline":false,"label":"Android","permalink":"/react-native-iap/blog/tags/android","description":"Android platform specific features"},{"inline":false,"label":"External Payments","permalink":"/react-native-iap/blog/tags/external-payments","description":"Google Play External Payments program (Japan)"},{"inline":false,"label":"Billing Library","permalink":"/react-native-iap/blog/tags/billing-library","description":"Google Play Billing Library updates"}],"readingTime":2.42,"hasTruncateMarker":true,"authors":[{"name":"Hyo","title":"React Native IAP Maintainer","url":"https://github.com/hyochan","page":{"permalink":"/react-native-iap/blog/authors/hyochan"},"socials":{"github":"https://github.com/hyochan","linkedin":"https://www.linkedin.com/in/hyochanjang/","x":"https://x.com/hyodotdev"},"imageURL":"https://github.com/hyochan.png","key":"hyochan"}],"frontMatter":{"slug":"release-14.6.4","title":"14.6.4 - Google Play Billing 8.3.0 External Payments Support","authors":["hyochan"],"tags":["release","android","external-payments","billing-library"],"description":"React Native IAP 14.6.4 adds support for Google Play Billing Library 8.3.0 External Payments program, enabling side-by-side payment choice in Japan.","date":"2025-12-28T00:00:00.000Z"},"unlisted":false,"prevItem":{"title":"14.7.0 - PurchaseState Cleanup & API Consolidation","permalink":"/react-native-iap/blog/release-14.7.0"},"nextItem":{"title":"14.6.3 - Advanced Commerce Data & Platform Field Updates","permalink":"/react-native-iap/blog/release-14.6.3"}}')},37152:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>s,default:()=>h,frontMatter:()=>a,metadata:()=>l,toc:()=>d});var l=i(29477),r=i(74848),t=i(28453);const a={slug:"release-14.6.4",title:"14.6.4 - Google Play Billing 8.3.0 External Payments Support",authors:["hyochan"],tags:["release","android","external-payments","billing-library"],description:"React Native IAP 14.6.4 adds support for Google Play Billing Library 8.3.0 External Payments program, enabling side-by-side payment choice in Japan.",date:new Date("2025-12-28T00:00:00.000Z")},s="React Native IAP 14.6.4",o={authorsImageUrls:[void 0]},d=[{value:"What&#39;s New",id:"whats-new",level:2},{value:"External Payments Program (Japan Only)",id:"external-payments-program-japan-only",level:3},{value:"New APIs",id:"new-apis",level:4},{value:"New Event",id:"new-event",level:4},{value:"Usage Example",id:"usage-example",level:3},{value:"Key Differences from User Choice Billing",id:"key-differences-from-user-choice-billing",level:3},{value:"OpenIAP Updates",id:"openiap-updates",level:2},{value:"Important Notes",id:"important-notes",level:2},{value:"Installation",id:"installation",level:2}];function c(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.p,{children:["14.6.4 adds support for the ",(0,r.jsx)(n.strong,{children:"External Payments"})," program introduced in Google Play Billing Library 8.3.0. This new feature enables developers to offer a side-by-side choice between Google Play Billing and their external payment option directly in the purchase flow."]}),"\n",(0,r.jsx)(n.h2,{id:"whats-new",children:"What's New"}),"\n",(0,r.jsx)(n.h3,{id:"external-payments-program-japan-only",children:"External Payments Program (Japan Only)"}),"\n",(0,r.jsxs)(n.p,{children:["Google Play Billing Library 8.3.0 introduces the External Payments program, which presents a ",(0,r.jsx)(n.strong,{children:"side-by-side choice"})," between Google Play Billing and the developer's external payment option directly in the purchase dialog."]}),"\n",(0,r.jsx)(n.p,{children:"This differs from the existing User Choice Billing in that both options appear together in the same dialog, rather than requiring a separate selection dialog."}),"\n",(0,r.jsx)(n.h4,{id:"new-apis",children:"New APIs"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"BillingProgramAndroid.EXTERNAL_PAYMENTS"})})," - New billing program type for external payments"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"DeveloperBillingOptionParamsAndroid"})})," - Configure external payment option in purchase flow"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"DeveloperBillingLaunchModeAndroid"})})," - How to launch the external payment link"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"DeveloperProvidedBillingDetailsAndroid"})})," - Contains ",(0,r.jsx)(n.code,{children:"externalTransactionToken"})," when user selects developer billing"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"developerProvidedBillingListenerAndroid"})})," - New listener for when user selects developer billing"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"developerBillingOption"})})," - New field in ",(0,r.jsx)(n.code,{children:"RequestPurchaseAndroidProps"})," and ",(0,r.jsx)(n.code,{children:"RequestSubscriptionAndroidProps"})]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"new-event",children:"New Event"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"IapEvent.DeveloperProvidedBillingAndroid"})})," - Fired when user selects developer billing in External Payments flow"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"usage-example",children:"Usage Example"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import {\n  enableBillingProgramAndroid,\n  developerProvidedBillingListenerAndroid,\n  requestPurchase,\n  initConnection,\n} from 'react-native-iap';\n\n// Option A: Enable External Payments via initConnection config (Recommended)\nawait initConnection({\n  enableBillingProgramAndroid: 'external-payments',\n});\n\n// Option B: Enable manually BEFORE initConnection\nenableBillingProgramAndroid('external-payments');\nawait initConnection();\n\n// Set up listener for when user selects developer billing\nconst subscription = developerProvidedBillingListenerAndroid((details) => {\n  console.log('User selected developer billing');\n  console.log('Token:', details.externalTransactionToken);\n\n  // Process payment through your external payment system\n  processExternalPayment();\n\n  // Report to Google Play backend within 24 hours\n  reportToGooglePlay(details.externalTransactionToken);\n});\n\n// Request purchase with developer billing option\nawait requestPurchase({\n  request: {\n    google: {\n      skus: ['premium_monthly'],\n      developerBillingOption: {\n        billingProgram: 'external-payments',\n        linkUri: 'https://your-website.com/payment',\n        launchMode: 'launch-in-external-browser-or-app',\n      },\n    },\n  },\n  type: 'subs',\n});\n"})}),"\n",(0,r.jsx)(n.h3,{id:"key-differences-from-user-choice-billing",children:"Key Differences from User Choice Billing"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Feature"}),(0,r.jsx)(n.th,{children:"User Choice Billing"}),(0,r.jsx)(n.th,{children:"External Payments"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Billing Library"}),(0,r.jsx)(n.td,{children:"7.0+"}),(0,r.jsx)(n.td,{children:"8.3.0+"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Availability"}),(0,r.jsx)(n.td,{children:"Eligible regions"}),(0,r.jsx)(n.td,{children:"Japan only"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"UI"}),(0,r.jsx)(n.td,{children:"Separate dialog"}),(0,r.jsx)(n.td,{children:"Side-by-side in purchase dialog"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Setup Mode"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"alternativeBillingModeAndroid: 'user-choice'"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"enableBillingProgramAndroid('external-payments')"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Listener"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"userChoiceBillingListenerAndroid"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"developerProvidedBillingListenerAndroid"})})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"openiap-updates",children:"OpenIAP Updates"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"openiap-google"}),": ",(0,r.jsx)(n.a,{href:"https://github.com/hyodotdev/openiap/compare/google-v1.3.16...google-v1.3.19",children:"1.3.16 \u2192 1.3.19"})," - Google Play Billing 8.3.0 External Payments support"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"openiap-gql"}),": ",(0,r.jsx)(n.a,{href:"https://github.com/hyodotdev/openiap/compare/gql-v1.3.8...gql-v1.3.10",children:"1.3.8 \u2192 1.3.10"})," - External Payments types, ",(0,r.jsx)(n.code,{children:"enableBillingProgramAndroid"})," in InitConnectionConfig"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"openiap-apple"}),": ",(0,r.jsx)(n.a,{href:"https://github.com/hyodotdev/openiap/compare/apple-v1.3.7...apple-v1.3.8",children:"1.3.7 \u2192 1.3.8"})," - Auto connection management improvements"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"important-notes",children:"Important Notes"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["External Payments is currently ",(0,r.jsx)(n.strong,{children:"only available in Japan"})]}),"\n",(0,r.jsxs)(n.li,{children:["Can enable via ",(0,r.jsx)(n.code,{children:"initConnection({ enableBillingProgramAndroid: 'external-payments' })"})," (recommended) or ",(0,r.jsx)(n.code,{children:"enableBillingProgramAndroid('external-payments')"})," before initConnection"]}),"\n",(0,r.jsxs)(n.li,{children:["External transaction token must be reported to Google Play within ",(0,r.jsx)(n.strong,{children:"24 hours"})]}),"\n",(0,r.jsxs)(n.li,{children:["If user selects Google Play billing, ",(0,r.jsx)(n.code,{children:"purchaseUpdatedListener"})," fires as normal"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"npm install react-native-iap react-native-nitro-modules\n# or\nyarn add react-native-iap react-native-nitro-modules\n# or\nbun add react-native-iap react-native-nitro-modules\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Check out the ",(0,r.jsx)(n.a,{href:"/docs/guides/alternative-billing#external-payments-api-830---japan-only",children:"Alternative Billing Guide"})," for detailed documentation."]}),"\n",(0,r.jsxs)(n.p,{children:["Questions or feedback? Reach out via ",(0,r.jsx)(n.a,{href:"https://github.com/hyochan/react-native-iap/issues",children:"GitHub issues"}),"."]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}}}]);