"use strict";(self.webpackChunkreact_native_iap_docs=self.webpackChunkreact_native_iap_docs||[]).push([[559],{1850:(e,r,n)=>{n.d(r,{A:()=>i});n(6540);var o=n(6025),t=n(4848);const s={default:{url:"https://www.greatfrontend.com?fpr=hyo73"},coding:{url:"https://www.greatfrontend.com/prepare/coding?fpr=hyo73",title:"Coding Interview Questions",description:"Practice coding problems for technical interviews"},quiz:{url:"https://www.greatfrontend.com/questions/formats/quiz?fpr=hyo73",title:"Quiz Interview Questions",description:"Test your knowledge with quiz-style questions"},"system-design":{url:"https://www.greatfrontend.com/questions/formats/system-design?fpr=hyo73",title:"Front End System Design Questions",description:"Master system design for frontend applications"},behavioral:{url:"https://www.greatfrontend.com/behavioral-interview-playbook?fpr=hyo73",title:"Behavioral Interview Questions",description:"Prepare for behavioral interview questions"},"interview-guide":{url:"https://www.greatfrontend.com/front-end-interview-playbook?fpr=hyo73",title:"Front End Interview Guidebook",description:"Complete guide to frontend interviews"},"system-design-guide":{url:"https://www.greatfrontend.com/front-end-system-design-playbook?fpr=hyo73",title:"Front End System Design Guidebook",description:"Comprehensive system design guide"},"study-plan":{url:"https://www.greatfrontend.com/interviews/study-plans?fpr=hyo73",title:"Study Plan",description:"Structured learning paths for interview preparation"},questions:{url:"https://www.greatfrontend.com/questions?fpr=hyo73",title:"Framework-specific Practice Questions",description:"Practice questions for popular frameworks"},javascript:{url:"https://www.greatfrontend.com/questions/js?fpr=hyo73",title:"JavaScript Interview Questions",description:"Master JavaScript for technical interviews"},react:{url:"https://www.greatfrontend.com/questions/react?fpr=hyo73",title:"React Interview Questions",description:"Prepare for React-specific interviews"}};function i({type:e="default",className:r="greatfrontend-banner",style:n}){const i=s[e],a=(0,o.Ay)("/img/greatfrontend-js.gif");return(0,t.jsxs)("div",{className:r,style:{marginTop:0,marginBottom:12,textAlign:"center",...n},children:[(0,t.jsx)("a",{href:i.url,target:"_blank",rel:"noopener noreferrer",style:{display:"inline-block",textDecoration:"none"},children:(0,t.jsx)("img",{src:a,alt:"GreatFrontEnd",style:{maxWidth:"100%",height:"auto",border:"none",display:"block"}})}),i.title&&(0,t.jsx)("div",{style:{marginTop:0,fontSize:"0.85em"},children:(0,t.jsx)("a",{href:i.url,target:"_blank",rel:"noopener noreferrer",style:{color:"var(--ifm-color-primary)",textDecoration:"underline",fontWeight:500,cursor:"pointer"},onMouseEnter:e=>{e.currentTarget.style.textDecoration="underline",e.currentTarget.style.opacity="0.8"},onMouseLeave:e=>{e.currentTarget.style.textDecoration="underline",e.currentTarget.style.opacity="1"},children:i.title})})]})}},2725:(e,r,n)=>{n.d(r,{A:()=>a});var o=n(1850),t=n(6540),s=n(4848);const i=["coding","quiz","system-design","behavioral","interview-guide","system-design-guide","study-plan","questions","javascript","react"];function a(){const e=(0,t.useMemo)(()=>{const e=Math.floor(Math.random()*i.length);return i[e]},[]);return(0,s.jsx)(o.A,{type:e})}},8132:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>l,contentTitle:()=>c,default:()=>p,frontMatter:()=>a,metadata:()=>o,toc:()=>d});const o=JSON.parse('{"id":"guides/error-handling","title":"Error Handling","description":"This guide covers best practices for handling errors in your react-native-iap implementation.","source":"@site/versioned_docs/version-14.5/guides/error-handling.md","sourceDirName":"guides","slug":"/guides/error-handling","permalink":"/react-native-iap/docs/guides/error-handling","draft":false,"unlisted":false,"editUrl":"https://github.com/hyochan/react-native-iap/tree/main/docs/versioned_docs/version-14.5/guides/error-handling.md","tags":[],"version":"14.5","sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"tutorialSidebar","previous":{"title":"Alternative Billing","permalink":"/react-native-iap/docs/guides/alternative-billing"},"next":{"title":"Expo Plugin","permalink":"/react-native-iap/docs/guides/expo-plugin"}}');var t=n(4848),s=n(8453),i=n(2725);const a={sidebar_position:4},c="Error Handling",l={},d=[{value:"Overview",id:"overview",level:2},{value:"Error Structure",id:"error-structure",level:2},{value:"Common Error Scenarios",id:"common-error-scenarios",level:2},{value:"Network Errors",id:"network-errors",level:3},{value:"User Cancellation",id:"user-cancellation",level:3},{value:"Payment Issues",id:"payment-issues",level:3},{value:"Error Recovery Strategies",id:"error-recovery-strategies",level:2},{value:"Retry Logic",id:"retry-logic",level:3},{value:"Graceful Degradation",id:"graceful-degradation",level:3},{value:"Logging and Analytics",id:"logging-and-analytics",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"1. Always Handle Errors",id:"1-always-handle-errors",level:3},{value:"2. Provide User-Friendly Messages",id:"2-provide-user-friendly-messages",level:3},{value:"3. Handle Platform Differences",id:"3-handle-platform-differences",level:3},{value:"See Also",id:"see-also",level:2}];function u(e){const r={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.header,{children:(0,t.jsx)(r.h1,{id:"error-handling",children:"Error Handling"})}),"\n",(0,t.jsx)(i.A,{}),"\n",(0,t.jsx)(r.p,{children:"This guide covers best practices for handling errors in your react-native-iap implementation."}),"\n",(0,t.jsx)(r.h2,{id:"overview",children:"Overview"}),"\n",(0,t.jsx)(r.p,{children:"React Native IAP provides comprehensive error handling through standardized error codes and messages. All errors are returned as structured objects with consistent properties across iOS and Android platforms."}),"\n",(0,t.jsxs)(r.p,{children:["For a complete list of error codes, see ",(0,t.jsx)(r.a,{href:"../api/error-codes",children:"Error Codes"}),"."]}),"\n",(0,t.jsx)(r.h2,{id:"error-structure",children:"Error Structure"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-typescript",children:"interface IapError {\n  code: string;\n  message: string;\n  debugMessage?: string;\n  underlyingError?: any;\n}\n"})}),"\n",(0,t.jsx)(r.h2,{id:"common-error-scenarios",children:"Common Error Scenarios"}),"\n",(0,t.jsx)(r.h3,{id:"network-errors",children:"Network Errors"}),"\n",(0,t.jsx)(r.p,{children:"Handle network connectivity issues gracefully:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-typescript",children:"import {useIAP, ErrorCode} from 'react-native-iap';\n\nconst {requestPurchase} = useIAP({\n  onPurchaseError: (error) => {\n    if (error.code === ErrorCode.NetworkError) {\n      // Handle network issues\n      showRetryDialog();\n    }\n  },\n});\n"})}),"\n",(0,t.jsx)(r.h3,{id:"user-cancellation",children:"User Cancellation"}),"\n",(0,t.jsx)(r.p,{children:"Gracefully handle when users cancel purchases:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-typescript",children:"import {useIAP, ErrorCode} from 'react-native-iap';\n\nconst {requestPurchase} = useIAP({\n  onPurchaseError: (error) => {\n    if (error.code === ErrorCode.UserCancelled) {\n      // User cancelled the purchase\n      // Don't show error message, just continue\n      return;\n    }\n  },\n});\n"})}),"\n",(0,t.jsx)(r.h3,{id:"payment-issues",children:"Payment Issues"}),"\n",(0,t.jsx)(r.p,{children:"Handle various payment-related errors:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-typescript",children:"import {useIAP, ErrorCode} from 'react-native-iap';\n\nconst {requestPurchase} = useIAP({\n  onPurchaseError: (error) => {\n    switch (error.code) {\n      case ErrorCode.DeveloperError:\n        showMessage(\n          'Invalid payment method. Please check your payment settings.',\n        );\n        break;\n      case ErrorCode.Unknown:\n        showMessage('Purchase failed. Please try again.');\n        break;\n      default:\n        showMessage('Purchase failed. Please try again.');\n    }\n  },\n});\n"})}),"\n",(0,t.jsx)(r.h2,{id:"error-recovery-strategies",children:"Error Recovery Strategies"}),"\n",(0,t.jsx)(r.h3,{id:"retry-logic",children:"Retry Logic"}),"\n",(0,t.jsx)(r.p,{children:"Implement exponential backoff for transient errors:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-typescript",children:"const retryWithBackoff = async (fn: () => Promise<any>, maxRetries = 3) => {\n  for (let i = 0; i < maxRetries; i++) {\n    try {\n      return await fn();\n    } catch (error) {\n      if (i === maxRetries - 1) throw error;\n\n      // Only retry on network or temporary errors\n      if (\n        [ErrorCode.NetworkError, ErrorCode.ServiceError].includes(error.code)\n      ) {\n        await new Promise((resolve) =>\n          setTimeout(resolve, Math.pow(2, i) * 1000),\n        );\n      } else {\n        throw error;\n      }\n    }\n  }\n};\n"})}),"\n",(0,t.jsx)(r.h3,{id:"graceful-degradation",children:"Graceful Degradation"}),"\n",(0,t.jsx)(r.p,{children:"Provide fallback experiences:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-typescript",children:"import {ErrorCode} from 'react-native-iap';\n\nconst handlePurchase = async (productId: string) => {\n  try {\n    await purchaseProduct(productId);\n  } catch (error) {\n    if (error.code === ErrorCode.IapNotAvailable) {\n      // Redirect to web subscription\n      redirectToWebPurchase(productId);\n    } else {\n      showErrorMessage(error.message);\n    }\n  }\n};\n"})}),"\n",(0,t.jsx)(r.h2,{id:"logging-and-analytics",children:"Logging and Analytics"}),"\n",(0,t.jsx)(r.p,{children:"Track errors for debugging and analytics:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-typescript",children:"const trackError = (error: IapError, context: string) => {\n  console.error(`IAP Error in ${context}:`, error);\n\n  // Send to analytics\n  analytics.track('iap_error', {\n    error_code: error.code,\n    error_message: error.message,\n    context,\n    platform: Platform.OS,\n  });\n};\n"})}),"\n",(0,t.jsx)(r.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,t.jsx)(r.h3,{id:"1-always-handle-errors",children:"1. Always Handle Errors"}),"\n",(0,t.jsx)(r.p,{children:"Never leave IAP operations without error handling:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-typescript",children:"// \u274c Bad\npurchaseProduct('product_id');\n\n// \u2705 Good\ntry {\n  await purchaseProduct('product_id');\n} catch (error) {\n  handlePurchaseError(error);\n}\n"})}),"\n",(0,t.jsx)(r.h3,{id:"2-provide-user-friendly-messages",children:"2. Provide User-Friendly Messages"}),"\n",(0,t.jsx)(r.p,{children:"Convert technical errors to user-friendly messages:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-typescript",children:"import {ErrorCode} from 'react-native-iap';\n\nconst getUserFriendlyMessage = (error: IapError): string => {\n  switch (error.code) {\n    case ErrorCode.UserCancelled:\n      return null; // Don't show message\n    case ErrorCode.NetworkError:\n      return 'Please check your internet connection and try again.';\n    case ErrorCode.Unknown:\n      return 'There was an issue with your payment method.';\n    default:\n      return 'Something went wrong. Please try again later.';\n  }\n};\n"})}),"\n",(0,t.jsx)(r.h3,{id:"3-handle-platform-differences",children:"3. Handle Platform Differences"}),"\n",(0,t.jsx)(r.p,{children:"Some errors may be platform-specific:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-typescript",children:"import {ErrorCode} from 'react-native-iap';\n\nconst handlePlatformSpecificError = (error: IapError) => {\n  if (Platform.OS === 'ios' && error.code === ErrorCode.ItemUnavailable) {\n    showMessage('This product is not available in your country.');\n  } else if (\n    Platform.OS === 'android' &&\n    error.code === ErrorCode.DeveloperError\n  ) {\n    // Log for debugging but don't show to user\n    console.error('Google Play configuration error:', error);\n  }\n};\n"})}),"\n",(0,t.jsx)(r.h2,{id:"see-also",children:"See Also"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.a,{href:"../api/error-codes",children:"Error Codes Reference"})," - Complete list of error codes"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.a,{href:"../api/use-iap",children:"Use IAP Hook"})," - Main API documentation"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.a,{href:"./troubleshooting",children:"Troubleshooting"})," - Common issues and solutions"]}),"\n"]})]})}function p(e={}){const{wrapper:r}={...(0,s.R)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(u,{...e})}):u(e)}},8453:(e,r,n)=>{n.d(r,{R:()=>i,x:()=>a});var o=n(6540);const t={},s=o.createContext(t);function i(e){const r=o.useContext(s);return o.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function a(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),o.createElement(s.Provider,{value:r},e.children)}}}]);