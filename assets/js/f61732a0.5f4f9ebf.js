"use strict";(self.webpackChunkreact_native_iap_docs=self.webpackChunkreact_native_iap_docs||[]).push([[8919],{12707:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>t,default:()=>g,frontMatter:()=>s,metadata:()=>l,toc:()=>c});const l=JSON.parse('{"id":"api/methods/android-specific","title":"Android Specific","description":"The following Android\u2011only helpers expose Google Play Billing specific capabilities. Most day\u2011to\u2011day flows are covered by the cross\u2011platform Unified APIs; use these only when you need Android-specific features.","source":"@site/docs/api/methods/android-specific.md","sourceDirName":"api/methods","slug":"/api/methods/android-specific","permalink":"/react-native-iap/docs/api/methods/android-specific","draft":false,"unlisted":false,"editUrl":"https://github.com/hyochan/react-native-iap/tree/main/docs/docs/api/methods/android-specific.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"title":"Android Specific","sidebar_label":"Android Specific","sidebar_position":5},"sidebar":"tutorialSidebar","previous":{"title":"iOS Specific","permalink":"/react-native-iap/docs/api/methods/ios-specific"},"next":{"title":"useIAP Hook","permalink":"/react-native-iap/docs/api/use-iap"}}');var r=i(74848),a=i(28453),o=i(35159);const s={title:"Android Specific",sidebar_label:"Android Specific",sidebar_position:5},t="Android Specific APIs",d={},c=[{value:"Billing Programs API (8.2.0+)",id:"billing-programs-api-820",level:2},{value:"isBillingProgramAvailableAndroid()",id:"isbillingprogramavailableandroid",level:3},{value:"launchExternalLinkAndroid()",id:"launchexternallinkandroid",level:3},{value:"createBillingProgramReportingDetailsAndroid()",id:"createbillingprogramreportingdetailsandroid",level:3},{value:"Complete Billing Programs Flow Example",id:"complete-billing-programs-flow-example",level:3},{value:"Alternative Billing (Legacy)",id:"alternative-billing-legacy",level:2},{value:"Purchase Management",id:"purchase-management",level:2},{value:"checkAlternativeBillingAvailabilityAndroid()",id:"checkalternativebillingavailabilityandroid",level:3},{value:"showAlternativeBillingDialogAndroid()",id:"showalternativebillingdialogandroid",level:3},{value:"createAlternativeBillingTokenAndroid()",id:"createalternativebillingtokenandroid",level:3},{value:"Alternative Billing Configuration",id:"alternative-billing-configuration",level:3},{value:"Complete Flow Example (Legacy)",id:"complete-flow-example-legacy",level:3},{value:"Purchase Acknowledgment &amp; Consumption",id:"purchase-acknowledgment--consumption",level:2},{value:"acknowledgePurchaseAndroid()",id:"acknowledgepurchaseandroid",level:3},{value:"consumePurchaseAndroid()",id:"consumepurchaseandroid",level:3},{value:"flushFailedPurchasesCachedAsPendingAndroid (Removed)",id:"flushfailedpurchasescachedaspendingandroid-removed",level:3}];function h(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"android-specific-apis",children:"Android Specific APIs"})}),"\n",(0,r.jsx)(o.A,{}),"\n",(0,r.jsxs)(n.p,{children:["The following Android\u2011only helpers expose Google Play Billing specific capabilities. Most day\u2011to\u2011day flows are covered by the cross\u2011platform ",(0,r.jsx)(n.a,{href:"./unified-apis",children:"Unified APIs"}),"; use these only when you need Android-specific features."]}),"\n",(0,r.jsx)(n.h2,{id:"billing-programs-api-820",children:"Billing Programs API (8.2.0+)"}),"\n",(0,r.jsx)(n.p,{children:"New in Google Play Billing Library 8.2.0, the Billing Programs API provides a unified way to handle external billing programs:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"#isbillingprogramavailableandroid",children:(0,r.jsx)(n.code,{children:"isBillingProgramAvailableAndroid()"})})," \u2014 Check if a billing program is available"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"#launchexternallinkandroid",children:(0,r.jsx)(n.code,{children:"launchExternalLinkAndroid()"})})," \u2014 Launch external link for billing programs"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"#createbillingprogramreportingdetailsandroid",children:(0,r.jsx)(n.code,{children:"createBillingProgramReportingDetailsAndroid()"})})," \u2014 Get reporting token"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"isbillingprogramavailableandroid",children:"isBillingProgramAvailableAndroid()"}),"\n",(0,r.jsx)(n.p,{children:"Check if a specific billing program is available for the current user."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"import {isBillingProgramAvailableAndroid} from 'react-native-iap';\n\nconst result = await isBillingProgramAvailableAndroid('external-offer');\nif (result.isAvailable) {\n  console.log('External offer program is available');\n} else {\n  console.log('External offer program not available for this user');\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"program"})," (",(0,r.jsx)(n.code,{children:"BillingProgramAndroid"}),"): The billing program to check","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"'external-offer'"})," - External offer programs"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"'external-content-link'"})," - External content link programs"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"'external-payments'"})," - External payments program (Japan only, 8.3.0+)"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Returns:"})," ",(0,r.jsx)(n.code,{children:"Promise<BillingProgramAvailabilityResultAndroid>"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"interface BillingProgramAvailabilityResultAndroid {\n  billingProgram: BillingProgramAndroid;\n  isAvailable: boolean;\n}\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Platform:"})," Android 8.2.0+"]}),"\n",(0,r.jsx)(n.h3,{id:"launchexternallinkandroid",children:"launchExternalLinkAndroid()"}),"\n",(0,r.jsx)(n.p,{children:"Launch an external link for the specified billing program. This opens the external purchase flow."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"import {launchExternalLinkAndroid} from 'react-native-iap';\n\nawait launchExternalLinkAndroid({\n  billingProgram: 'external-offer',\n  launchMode: 'launch-in-external-browser-or-app',\n  linkType: 'link-to-digital-content-offer',\n  linkUri: 'https://your-payment-site.com/offer',\n});\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"params"})," (",(0,r.jsx)(n.code,{children:"LaunchExternalLinkParamsAndroid"}),"):","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"billingProgram"}),": The billing program type"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"launchMode"}),": How to launch the external link","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"'launch-in-external-browser-or-app'"})," - Launch in external browser"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"'caller-will-launch-link'"})," - App will handle launching"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"linkType"}),": The type of external link","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"'link-to-digital-content-offer'"})," - Digital content offer"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"'link-to-app-download'"})," - App download link"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"linkUri"}),": The URI to launch"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Returns:"})," ",(0,r.jsx)(n.code,{children:"Promise<void>"})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Platform:"})," Android 8.2.0+"]}),"\n",(0,r.jsx)(n.h3,{id:"createbillingprogramreportingdetailsandroid",children:"createBillingProgramReportingDetailsAndroid()"}),"\n",(0,r.jsx)(n.p,{children:"Get the external transaction token for reporting transactions made outside of Google Play."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"import {createBillingProgramReportingDetailsAndroid} from 'react-native-iap';\n\nconst details = await createBillingProgramReportingDetailsAndroid('external-offer');\nconsole.log('Token:', details.externalTransactionToken);\n\n// Report this token to Google Play within 24 hours\nawait reportToGooglePlayBackend(details.externalTransactionToken);\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"program"})," (",(0,r.jsx)(n.code,{children:"BillingProgramAndroid"}),"): The billing program type"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Returns:"})," ",(0,r.jsx)(n.code,{children:"Promise<BillingProgramReportingDetailsAndroid>"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"interface BillingProgramReportingDetailsAndroid {\n  billingProgram: BillingProgramAndroid;\n  externalTransactionToken: string;\n}\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Platform:"})," Android 8.2.0+"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Important:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Token must be reported to Google Play backend within 24 hours"}),"\n",(0,r.jsx)(n.li,{children:"Requires server-side integration with Google Play Developer API"}),"\n",(0,r.jsx)(n.li,{children:"Failure to report will result in refund and possible account suspension"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"complete-billing-programs-flow-example",children:"Complete Billing Programs Flow Example"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"import {\n  isBillingProgramAvailableAndroid,\n  launchExternalLinkAndroid,\n  createBillingProgramReportingDetailsAndroid,\n} from 'react-native-iap';\n\nasync function purchaseWithBillingProgram(productId: string) {\n  // Step 1: Check availability\n  const availability = await isBillingProgramAvailableAndroid('external-offer');\n  if (!availability.isAvailable) {\n    throw new Error('External offer program not available');\n  }\n\n  // Step 2: Launch external link\n  await launchExternalLinkAndroid({\n    billingProgram: 'external-offer',\n    launchMode: 'launch-in-external-browser-or-app',\n    linkType: 'link-to-digital-content-offer',\n    linkUri: `https://your-payment-site.com/purchase/${productId}`,\n  });\n\n  // Step 3: After payment completes, get reporting token\n  const details = await createBillingProgramReportingDetailsAndroid('external-offer');\n\n  // Step 4: Report to Google (must be done within 24 hours)\n  await reportToGooglePlayBackend(details.externalTransactionToken, productId);\n\n  return {success: true, token: details.externalTransactionToken};\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"See also:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://developer.android.com/google/play/billing/billing-programs",children:"Google Play Billing Programs"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/docs/examples/alternative-billing",children:"Alternative Billing Example"})}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"alternative-billing-legacy",children:"Alternative Billing (Legacy)"}),"\n",(0,r.jsx)(n.admonition,{title:"Deprecated",type:"warning",children:(0,r.jsxs)(n.p,{children:["The following methods are deprecated in favor of the ",(0,r.jsx)(n.a,{href:"#billing-programs-api-820",children:"Billing Programs API"}),". They will continue to work but you should migrate to the new API."]})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"#checkalternativebillingavailabilityandroid",children:(0,r.jsx)(n.code,{children:"checkAlternativeBillingAvailabilityAndroid()"})})," \u2014 Check if alternative billing is available"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"#showalternativebillingdialogandroid",children:(0,r.jsx)(n.code,{children:"showAlternativeBillingDialogAndroid()"})})," \u2014 Show required information dialog"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"#createalternativebillingtokenandroid",children:(0,r.jsx)(n.code,{children:"createAlternativeBillingTokenAndroid()"})})," \u2014 Generate reporting token"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"purchase-management",children:"Purchase Management"}),"\n",(0,r.jsx)(n.h3,{id:"checkalternativebillingavailabilityandroid",children:"checkAlternativeBillingAvailabilityAndroid()"}),"\n",(0,r.jsx)(n.admonition,{title:"Deprecated",type:"warning",children:(0,r.jsxs)(n.p,{children:["Use ",(0,r.jsx)(n.a,{href:"#isbillingprogramavailableandroid",children:(0,r.jsx)(n.code,{children:"isBillingProgramAvailableAndroid()"})})," instead."]})}),"\n",(0,r.jsx)(n.p,{children:"Check if alternative billing is available for the current user. This must be called before showing the alternative billing dialog."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"import {checkAlternativeBillingAvailabilityAndroid} from 'react-native-iap';\n\nconst isAvailable = await checkAlternativeBillingAvailabilityAndroid();\nif (isAvailable) {\n  console.log('Alternative billing is available');\n} else {\n  console.log('Alternative billing not available for this user');\n}\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Returns:"})," ",(0,r.jsx)(n.code,{children:"Promise<boolean>"})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Platform:"})," Android"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Requirements:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Must initialize connection with alternative billing mode"}),"\n",(0,r.jsx)(n.li,{children:"User must be eligible for alternative billing (determined by Google)"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"See also:"})," ",(0,r.jsx)(n.a,{href:"https://developer.android.com/google/play/billing/alternative",children:"Google Play Alternative Billing documentation"})]}),"\n",(0,r.jsx)(n.h3,{id:"showalternativebillingdialogandroid",children:"showAlternativeBillingDialogAndroid()"}),"\n",(0,r.jsx)(n.admonition,{title:"Deprecated",type:"warning",children:(0,r.jsxs)(n.p,{children:["Use ",(0,r.jsx)(n.a,{href:"#launchexternallinkandroid",children:(0,r.jsx)(n.code,{children:"launchExternalLinkAndroid()"})})," instead."]})}),"\n",(0,r.jsx)(n.p,{children:"Show Google's required information dialog to inform users about alternative billing. This must be called after checking availability and before processing payment."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"import {showAlternativeBillingDialogAndroid} from 'react-native-iap';\n\nconst userAccepted = await showAlternativeBillingDialogAndroid();\nif (userAccepted) {\n  console.log('User accepted alternative billing');\n  // Proceed with your payment flow\n} else {\n  console.log('User declined alternative billing');\n}\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Returns:"})," ",(0,r.jsx)(n.code,{children:"Promise<boolean>"})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Platform:"})," Android"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Note:"})," This dialog is required by Google Play's alternative billing policy. You must show this before redirecting users to your payment system."]}),"\n",(0,r.jsx)(n.h3,{id:"createalternativebillingtokenandroid",children:"createAlternativeBillingTokenAndroid()"}),"\n",(0,r.jsx)(n.admonition,{title:"Deprecated",type:"warning",children:(0,r.jsxs)(n.p,{children:["Use ",(0,r.jsx)(n.a,{href:"#createbillingprogramreportingdetailsandroid",children:(0,r.jsx)(n.code,{children:"createBillingProgramReportingDetailsAndroid()"})})," instead."]})}),"\n",(0,r.jsx)(n.p,{children:"Generate a reporting token after successfully processing payment through your payment system. This token must be reported to Google Play within 24 hours."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"import {createAlternativeBillingTokenAndroid} from 'react-native-iap';\n\n// After successfully processing payment in your system\nconst token = await createAlternativeBillingTokenAndroid('com.example.product');\n\nif (token) {\n  console.log('Token created:', token);\n  // Send this token to your backend to report to Google\n  await reportTokenToGooglePlay(token);\n} else {\n  console.error('Failed to create token');\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"sku"})," (string, optional): The product SKU that was purchased"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Returns:"})," ",(0,r.jsx)(n.code,{children:"Promise<string | null>"})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Platform:"})," Android"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Important:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Token must be reported to Google Play backend within 24 hours"}),"\n",(0,r.jsx)(n.li,{children:"Requires server-side integration with Google Play Developer API"}),"\n",(0,r.jsx)(n.li,{children:"Failure to report will result in refund and possible account suspension"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"alternative-billing-configuration",children:"Alternative Billing Configuration"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"import {initConnection, endConnection} from 'react-native-iap';\n\n// Initialize with billing program\nawait initConnection({\n  enableBillingProgramAndroid: 'user-choice-billing', // or 'external-offer', 'external-payments'\n});\n\n// To change program, reinitialize\nawait endConnection();\nawait initConnection({\n  enableBillingProgramAndroid: 'external-offer',\n});\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Billing Programs:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"user-choice-billing"})," - Users choose between Google Play billing or your payment system"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"external-offer"})," - External offer programs"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"external-payments"})," - External payments program (Japan only, 8.3.0+)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"external-content-link"})," - External content link programs"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"complete-flow-example-legacy",children:"Complete Flow Example (Legacy)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"import {\n  checkAlternativeBillingAvailabilityAndroid,\n  showAlternativeBillingDialogAndroid,\n  createAlternativeBillingTokenAndroid,\n} from 'react-native-iap';\n\nasync function purchaseWithAlternativeBilling(productId: string) {\n  // Step 1: Check availability\n  const isAvailable = await checkAlternativeBillingAvailabilityAndroid();\n  if (!isAvailable) {\n    throw new Error('Alternative billing not available');\n  }\n\n  // Step 2: Show required dialog\n  const userAccepted = await showAlternativeBillingDialogAndroid();\n  if (!userAccepted) {\n    throw new Error('User declined alternative billing');\n  }\n\n  // Step 3: Process payment in your system\n  const paymentResult = await processPaymentInYourSystem(productId);\n  if (!paymentResult.success) {\n    throw new Error('Payment failed');\n  }\n\n  // Step 4: Create reporting token\n  const token = await createAlternativeBillingTokenAndroid(productId);\n  if (!token) {\n    throw new Error('Failed to create token');\n  }\n\n  // Step 5: Report to Google (must be done within 24 hours)\n  await reportToGooglePlayBackend(token, productId, paymentResult);\n\n  return {success: true, token};\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"See also:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://developer.android.com/google/play/billing/alternative",children:"Google Play Alternative Billing documentation"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/docs/guides/alternative-billing",children:"Alternative Billing Example"})}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"purchase-acknowledgment--consumption",children:"Purchase Acknowledgment & Consumption"}),"\n",(0,r.jsx)(n.h3,{id:"acknowledgepurchaseandroid",children:"acknowledgePurchaseAndroid()"}),"\n",(0,r.jsx)(n.p,{children:"Acknowledge a non\u2011consumable purchase or subscription on Android."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"import {acknowledgePurchaseAndroid} from 'react-native-iap';\n\nawait acknowledgePurchaseAndroid({token: purchase.purchaseToken!});\n"})}),"\n",(0,r.jsx)(n.p,{children:"Notes:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["finishTransaction() calls this automatically when ",(0,r.jsx)(n.code,{children:"isConsumable"})," is false. You typically do not need to call it directly."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"consumepurchaseandroid",children:"consumePurchaseAndroid()"}),"\n",(0,r.jsx)(n.p,{children:"Consume a purchase (consumables only). This marks an item as consumed so it can be purchased again."}),"\n",(0,r.jsx)(n.p,{children:"Notes:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["finishTransaction() calls Android consumption automatically when ",(0,r.jsx)(n.code,{children:"isConsumable"})," is true."]}),"\n",(0,r.jsx)(n.li,{children:"A direct JS helper is not exposed; consumption is handled internally via the native module."}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"flushfailedpurchasescachedaspendingandroid-removed",children:"flushFailedPurchasesCachedAsPendingAndroid (Removed)"}),"\n",(0,r.jsx)(n.p,{children:"This legacy helper from older libraries has been removed. The modern flow is:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"// On app startup (Android)\nconst purchases = await getAvailablePurchases();\n\nfor (const p of purchases) {\n  if (/* consumable */) {\n    // finishTransaction will consume on Android when isConsumable is true\n    await finishTransaction({ purchase: p, isConsumable: true });\n  } else {\n    // finishTransaction will acknowledge on Android when isConsumable is false\n    await finishTransaction({ purchase: p, isConsumable: false });\n  }\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:'This ensures pending transactions are surfaced and properly resolved without a separate "flush" API.'})]})}function g(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},27856:(e,n,i)=>{i.d(n,{I:()=>r,V:()=>l});const l="https://iapkit.com",r="https://www.hyo.dev/api/ad-banner/cmjf0l2460003249hfyh029dm"},28453:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>s});var l=i(96540);const r={},a=l.createContext(r);function o(e){const n=l.useContext(a);return l.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),l.createElement(a.Provider,{value:n},e.children)}},35159:(e,n,i)=>{i.d(n,{A:()=>s});var l=i(96540),r=i(86025),a=i(27856),o=i(74848);function s({className:e="iapkit-banner",style:n}){const i=(0,r.Ay)("/img/iapkit-banner.gif"),s=(0,l.useCallback)(e=>{fetch(a.I,{method:"POST",mode:"no-cors"}).catch(()=>{})},[]);return(0,o.jsx)("div",{className:e,style:{marginTop:0,marginBottom:12,textAlign:"center",...n},children:(0,o.jsx)("a",{href:a.V,target:"_blank",rel:"noopener noreferrer",onClick:s,style:{display:"inline-block",textDecoration:"none"},children:(0,o.jsx)("img",{src:i,alt:"IapKit - In-App Purchase Validation Service",style:{border:"none",display:"block"}})})})}}}]);