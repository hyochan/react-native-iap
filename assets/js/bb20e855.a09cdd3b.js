"use strict";(self.webpackChunkreact_native_iap_docs=self.webpackChunkreact_native_iap_docs||[]).push([[2496],{27856:(e,n,r)=>{r.d(n,{I:()=>c,V:()=>s});const s="https://iapkit.com",c="https://www.hyo.dev/api/ad-banner/cmjf0l2460003249hfyh029dm"},28453:(e,n,r)=>{r.d(n,{R:()=>o,x:()=>t});var s=r(96540);const c={},i=s.createContext(c);function o(e){const n=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:o(e.components),s.createElement(i.Provider,{value:n},e.children)}},35159:(e,n,r)=>{r.d(n,{A:()=>t});var s=r(96540),c=r(86025),i=r(27856),o=r(74848);function t({className:e="iapkit-banner",style:n}){const r=(0,c.Ay)("/img/iapkit-banner.gif"),t=(0,s.useCallback)(e=>{fetch(i.I,{method:"POST",mode:"no-cors"}).catch(()=>{})},[]);return(0,o.jsx)("div",{className:e,style:{marginTop:0,marginBottom:12,textAlign:"center",...n},children:(0,o.jsx)("a",{href:i.V,target:"_blank",rel:"noopener noreferrer",onClick:t,style:{display:"inline-block",textDecoration:"none"},children:(0,o.jsx)("img",{src:r,alt:"IapKit - In-App Purchase Validation Service",style:{border:"none",display:"block"}})})})}},70941:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>u,frontMatter:()=>t,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"api/use-iap","title":"useIAP Hook","description":"The useIAP hook is the main interface for interacting with in-app purchases in React Native IAP. It provides a comprehensive API for managing purchases, subscriptions, and error handling.","source":"@site/docs/api/use-iap.md","sourceDirName":"api","slug":"/api/use-iap","permalink":"/react-native-iap/docs/api/use-iap","draft":false,"unlisted":false,"editUrl":"https://github.com/hyochan/react-native-iap/tree/main/docs/docs/api/use-iap.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"title":"useIAP Hook","sidebar_label":"useIAP Hook","sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"Android Specific","permalink":"/react-native-iap/docs/api/methods/android-specific"},"next":{"title":"Error Handling","permalink":"/react-native-iap/docs/api/error-handling"}}');var c=r(74848),i=r(28453),o=r(35159);const t={title:"useIAP Hook",sidebar_label:"useIAP Hook",sidebar_position:1},l="useIAP Hook",d={},a=[{value:"Import",id:"import",level:2},{value:"Important: Hook Behavior",id:"important-hook-behavior",level:2},{value:"Basic Usage",id:"basic-usage",level:2},{value:"Configuration Options",id:"configuration-options",level:2},{value:"useIAP(options)",id:"useiapoptions",level:3},{value:"UseIAPOptions",id:"useiapoptions-1",level:4},{value:"Configuration Properties",id:"configuration-properties",level:3},{value:"onPurchaseSuccess",id:"onpurchasesuccess",level:4},{value:"onPurchaseError",id:"onpurchaseerror",level:4},{value:"onError",id:"onerror",level:4},{value:"autoFinishTransactions",id:"autofinishtransactions",level:4},{value:"Return Values",id:"return-values",level:2},{value:"State Properties",id:"state-properties",level:3},{value:"connected",id:"connected",level:4},{value:"products",id:"products",level:4},{value:"subscriptions",id:"subscriptions",level:4},{value:"currentPurchaseError",id:"currentpurchaseerror",level:4},{value:"availablePurchases",id:"availablepurchases",level:4},{value:"promotedProductIOS",id:"promotedproductios",level:4},{value:"Methods",id:"methods",level:3},{value:"fetchProducts",id:"fetchproducts",level:4},{value:"requestPurchase",id:"requestpurchase",level:4},{value:"Subscription Offers",id:"subscription-offers",level:3},{value:"Android Subscription Offers",id:"android-subscription-offers",level:4},{value:"iOS Subscription Offers",id:"ios-subscription-offers",level:4},{value:"Subscription helpers (hook)",id:"subscription-helpers-hook",level:4},{value:"getAvailablePurchases",id:"getavailablepurchases",level:4},{value:"validateReceipt (Deprecated)",id:"validatereceipt-deprecated",level:4},{value:"getPromotedProductIOS",id:"getpromotedproductios",level:4},{value:"requestPurchaseOnPromotedProductIOS",id:"requestpurchaseonpromotedproductios",level:4},{value:"Platform-Specific Usage",id:"platform-specific-usage",level:2},{value:"iOS Example",id:"ios-example",level:3},{value:"Android Example",id:"android-example",level:3},{value:"Error Handling",id:"error-handling",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"Promoted Products (iOS Only)",id:"promoted-products-ios-only",level:2},{value:"See Also",id:"see-also",level:2}];function h(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.header,{children:(0,c.jsx)(n.h1,{id:"useiap-hook",children:"useIAP Hook"})}),"\n",(0,c.jsx)(o.A,{}),"\n",(0,c.jsxs)(n.p,{children:["The ",(0,c.jsx)(n.code,{children:"useIAP"})," hook is the main interface for interacting with in-app purchases in React Native IAP. It provides a comprehensive API for managing purchases, subscriptions, and error handling."]}),"\n",(0,c.jsx)(n.h2,{id:"import",children:"Import"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-tsx",children:"import {useIAP} from 'react-native-iap';\n"})}),"\n",(0,c.jsx)(n.h2,{id:"important-hook-behavior",children:"Important: Hook Behavior"}),"\n",(0,c.jsxs)(n.p,{children:["The ",(0,c.jsx)(n.code,{children:"useIAP"})," hook follows React Hooks conventions and differs from calling functions directly from ",(0,c.jsx)(n.code,{children:"react-native-iap"})," (index exports):"]}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"Automatic connection"}),": Automatically calls ",(0,c.jsx)(n.code,{children:"initConnection"})," on mount and ",(0,c.jsx)(n.code,{children:"endConnection"})," on unmount."]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"Void-returning methods"}),": Methods like ",(0,c.jsx)(n.code,{children:"fetchProducts"}),", ",(0,c.jsx)(n.code,{children:"requestPurchase"}),", ",(0,c.jsx)(n.code,{children:"getAvailablePurchases"}),", etc. return ",(0,c.jsx)(n.code,{children:"Promise<void>"})," in the hook. They do not resolve to data. Instead, they update internal state exposed by the hook: ",(0,c.jsx)(n.code,{children:"products"}),", ",(0,c.jsx)(n.code,{children:"subscriptions"}),", ",(0,c.jsx)(n.code,{children:"availablePurchases"}),", etc."]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"Don't await for data"}),": When using the hook, do not write ",(0,c.jsx)(n.code,{children:"const x = await fetchProducts(...)"}),". Call the method, then read the corresponding state from the hook."]}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"basic-usage",children:"Basic Usage"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-tsx",children:"const {\n  connected,\n  products,\n  subscriptions,\n  availablePurchases,\n  fetchProducts,\n  requestPurchase,\n  validateReceipt,\n} = useIAP({\n  onPurchaseSuccess: (purchase) => {\n    // Validate on your backend, then finish the transaction\n    console.log('Purchase successful:', purchase);\n  },\n  onPurchaseError: (error) => {\n    console.error('Purchase failed:', error);\n  },\n});\n"})}),"\n",(0,c.jsx)(n.h2,{id:"configuration-options",children:"Configuration Options"}),"\n",(0,c.jsx)(n.h3,{id:"useiapoptions",children:"useIAP(options)"}),"\n",(0,c.jsxs)(n.table,{children:[(0,c.jsx)(n.thead,{children:(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.th,{children:"Parameter"}),(0,c.jsx)(n.th,{children:"Type"}),(0,c.jsx)(n.th,{children:"Required"}),(0,c.jsx)(n.th,{children:"Description"})]})}),(0,c.jsx)(n.tbody,{children:(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:(0,c.jsx)(n.code,{children:"options"})}),(0,c.jsx)(n.td,{children:(0,c.jsx)(n.code,{children:"UseIAPOptions"})}),(0,c.jsx)(n.td,{children:"No"}),(0,c.jsx)(n.td,{children:"Configuration object"})]})})]}),"\n",(0,c.jsx)(n.h4,{id:"useiapoptions-1",children:"UseIAPOptions"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-tsx",children:"interface UseIAPOptions {\n  onPurchaseSuccess?: (purchase: Purchase) => void;\n  onPurchaseError?: (error: PurchaseError) => void;\n  onError?: (error: Error) => void; // Non-purchase errors (fetchProducts, getAvailablePurchases, etc.)\n  onPromotedProductIOS?: (product: Product) => void; // iOS promoted products\n}\n"})}),"\n",(0,c.jsx)(n.h3,{id:"configuration-properties",children:"Configuration Properties"}),"\n",(0,c.jsx)(n.h4,{id:"onpurchasesuccess",children:"onPurchaseSuccess"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Type"}),": ",(0,c.jsx)(n.code,{children:"(purchase: Purchase) => void"})]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Description"}),": Called when a purchase completes successfully"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Example"}),":"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-tsx",children:"onPurchaseSuccess: (purchase) => {\n  // Grant user access to purchased content\n  unlockFeature(purchase.productId);\n};\n"})}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(n.h4,{id:"onpurchaseerror",children:"onPurchaseError"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Type"}),": ",(0,c.jsx)(n.code,{children:"(error: PurchaseError) => void"})]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Description"}),": Called when a purchase fails"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Example"}),":"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-tsx",children:"onPurchaseError: (error) => {\n  if (error.code !== ErrorCode.UserCancelled) {\n    Alert.alert('Purchase Failed', error.message);\n  }\n};\n"})}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(n.h4,{id:"onerror",children:"onError"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Type"}),": ",(0,c.jsx)(n.code,{children:"(error: Error) => void"})]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Description"}),": Called when non-purchase operations fail (e.g., ",(0,c.jsx)(n.code,{children:"fetchProducts"}),", ",(0,c.jsx)(n.code,{children:"getAvailablePurchases"}),", ",(0,c.jsx)(n.code,{children:"getActiveSubscriptions"}),", ",(0,c.jsx)(n.code,{children:"restorePurchases"}),"). Use this callback to handle errors from query operations that are not related to the purchase flow itself."]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Example"}),":"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-tsx",children:"onError: (error) => {\n  // Handle non-purchase errors (network issues, query failures, etc.)\n  console.error('IAP operation failed:', error.message);\n  Alert.alert('Error', 'Failed to load products. Please check your connection.');\n};\n"})}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Full Example with Both Error Callbacks"}),":"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-tsx",children:"const {fetchProducts, requestPurchase} = useIAP({\n  onPurchaseSuccess: (purchase) => {\n    console.log('Purchase successful:', purchase.productId);\n  },\n  onPurchaseError: (error) => {\n    // Purchase-specific errors (user cancelled, payment failed, etc.)\n    if (error.code !== ErrorCode.UserCancelled) {\n      Alert.alert('Purchase Failed', error.message);\n    }\n  },\n  onError: (error) => {\n    // Non-purchase errors (fetchProducts failed, network issues, etc.)\n    console.error('Operation failed:', error.message);\n    Alert.alert('Error', 'Something went wrong. Please try again.');\n  },\n});\n"})}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(n.h4,{id:"autofinishtransactions",children:"autoFinishTransactions"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"Type"}),": ",(0,c.jsx)(n.code,{children:"boolean"})]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"Default"}),": ",(0,c.jsx)(n.code,{children:"true"})]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"Description"}),": Whether to automatically finish transactions after successful purchases"]}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"return-values",children:"Return Values"}),"\n",(0,c.jsx)(n.h3,{id:"state-properties",children:"State Properties"}),"\n",(0,c.jsx)(n.h4,{id:"connected",children:"connected"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Type"}),": ",(0,c.jsx)(n.code,{children:"boolean"})]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Description"}),": Whether the IAP service is connected and ready"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Example"}),":"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-tsx",children:"if (connected) {\n  // Safe to make IAP calls\n  fetchProducts({skus: ['product.id'], type: 'in-app'});\n}\n"})}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(n.h4,{id:"products",children:"products"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Type"}),": ",(0,c.jsx)(n.code,{children:"Product[]"})]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Description"}),": Array of available products"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Example"}),":"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-tsx",children:"products.map((product) => <ProductItem key={product.id} product={product} />);\n"})}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(n.h4,{id:"subscriptions",children:"subscriptions"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Type"}),": ",(0,c.jsx)(n.code,{children:"ProductSubscription[]"})]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Description"}),": Array of available subscription products"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Example"}),":"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-tsx",children:"subscriptions.map((subscription) => (\n  <SubscriptionItem key={subscription.id} subscription={subscription} />\n));\n"})}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(n.h4,{id:"currentpurchaseerror",children:"currentPurchaseError"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Type"}),": ",(0,c.jsx)(n.code,{children:"PurchaseError | null"})]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Description"}),": Current purchase error (if any)"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Example"}),":"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-tsx",children:"useEffect(() => {\n  if (currentPurchaseError) {\n    handlePurchaseError(currentPurchaseError);\n  }\n}, [currentPurchaseError]);\n"})}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(n.h4,{id:"availablepurchases",children:"availablePurchases"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Type"}),": ",(0,c.jsx)(n.code,{children:"Purchase[]"})]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Description"}),": Array of available purchases (restorable items)"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Example"}),":"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-tsx",children:"availablePurchases.map((purchase) => (\n  <RestorableItem key={purchase.id} purchase={purchase} />\n));\n"})}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(n.h4,{id:"promotedproductios",children:"promotedProductIOS"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Type"}),": ",(0,c.jsx)(n.code,{children:"Product | undefined"})]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Description"}),": The promoted product details (iOS only)"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Example"}),":"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-tsx",children:"useEffect(() => {\n  if (promotedProductIOS) {\n    // Handle promoted product\n    handlePromotedProduct(promotedProductIOS);\n  }\n}, [promotedProductIOS]);\n"})}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(n.h3,{id:"methods",children:"Methods"}),"\n",(0,c.jsx)(n.h4,{id:"fetchproducts",children:"fetchProducts"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Type"}),": ",(0,c.jsx)(n.code,{children:"(params: { skus: string[]; type?: 'in-app' | 'subs' }) => Promise<void>"})]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Description"}),": Fetch products or subscriptions and update ",(0,c.jsx)(n.code,{children:"products"})," / ",(0,c.jsx)(n.code,{children:"subscriptions"})," state. In the hook this returns ",(0,c.jsx)(n.code,{children:"void"})," (no data result), by design."]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Do not await for data"}),": Call it, then consume ",(0,c.jsx)(n.code,{children:"products"})," / ",(0,c.jsx)(n.code,{children:"subscriptions"})," state from the hook."]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Example"}),":"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-tsx",children:"useEffect(() => {\n  if (!connected) return;\n  // In hook: returns void, updates state\n  fetchProducts({\n    skus: ['com.app.premium', 'com.app.coins_100'],\n    type: 'in-app',\n  });\n  fetchProducts({skus: ['com.app.premium_monthly'], type: 'subs'});\n}, [connected, fetchProducts]);\n\n// Later in render/effects\nproducts.forEach((p) => console.log('product', p.id));\nsubscriptions.forEach((s) => console.log('sub', s.id));\n"})}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(n.h4,{id:"requestpurchase",children:"requestPurchase"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Type"}),": ",(0,c.jsx)(n.code,{children:"(request: RequestPurchaseProps) => Promise<void>"})]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Description"}),": Initiate a purchase request"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Parameters"}),":"]}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"request"}),": Purchase request configuration"]}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Example"}),":"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-tsx",children:"const buyProduct = async (productId: string) => {\n  try {\n    // In hook: returns void. Listen via callbacks.\n    await requestPurchase({\n      request: {\n        apple: {sku: productId},\n        google: {skus: [productId]},\n      },\n      type: 'in-app',\n    });\n  } catch (error) {\n    console.error('Purchase request failed:', error);\n  }\n};\n"})}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(n.h3,{id:"subscription-offers",children:"Subscription Offers"}),"\n",(0,c.jsx)(n.p,{children:"When purchasing subscriptions, you need to specify the pricing plan (offer) for each platform:"}),"\n",(0,c.jsx)(n.h4,{id:"android-subscription-offers",children:"Android Subscription Offers"}),"\n",(0,c.jsxs)(n.p,{children:["Android requires ",(0,c.jsx)(n.code,{children:"subscriptionOffers"})," array containing offer tokens from ",(0,c.jsx)(n.code,{children:"fetchProducts()"}),". Each offer token represents a specific pricing plan (base plan, introductory offer, etc.)."]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-tsx",children:"const buySubscription = async (subscriptionId: string) => {\n  // 1) Fetch subscription products first\n  await fetchProducts({skus: [subscriptionId], type: 'subs'});\n\n  // 2) Find the subscription and build offers\n  const subscription = subscriptions.find((s) => s.id === subscriptionId);\n  if (!subscription) return;\n\n  const subscriptionOffers = (\n    subscription.subscriptionOfferDetailsAndroid ?? []\n  ).map((offer) => ({\n    sku: subscriptionId,\n    offerToken: offer.offerToken,\n  }));\n\n  // 3) Request purchase with offers\n  await requestPurchase({\n    request: {\n      apple: {sku: subscriptionId},\n      google: {\n        skus: [subscriptionId],\n        // Only include subscriptionOffers when offers are available\n        ...(subscriptionOffers.length > 0 && {subscriptionOffers}),\n      },\n    },\n    type: 'subs',\n  });\n};\n"})}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Note"}),": ",(0,c.jsx)(n.code,{children:"subscriptionOffers"})," should only be included when subscription offers are available from ",(0,c.jsx)(n.code,{children:"fetchProducts()"}),". Without offers, Android purchases will fail."]}),"\n",(0,c.jsx)(n.h4,{id:"ios-subscription-offers",children:"iOS Subscription Offers"}),"\n",(0,c.jsxs)(n.p,{children:["iOS uses ",(0,c.jsx)(n.code,{children:"withOffer"})," for promotional discounts configured in App Store Connect. This is optional and only needed for special promotional pricing."]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-tsx",children:"const buySubscriptionWithOffer = async (\n  subscriptionId: string,\n  discountOffer?: DiscountOfferInputIOS,\n) => {\n  await requestPurchase({\n    request: {\n      apple: {\n        sku: subscriptionId,\n        // Optional: apply promotional offer\n        ...(discountOffer && {withOffer: discountOffer}),\n      },\n      google: {skus: [subscriptionId]},\n    },\n    type: 'subs',\n  });\n};\n"})}),"\n",(0,c.jsx)(n.h4,{id:"subscription-helpers-hook",children:"Subscription helpers (hook)"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.code,{children:"getActiveSubscriptions(subscriptionIds?) => Promise<ActiveSubscription[]>"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:["Returns active subscription info and also updates ",(0,c.jsx)(n.code,{children:"activeSubscriptions"})," state."]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsx)(n.p,{children:"Exception to the hook\u2019s void-return design: this method returns data for convenience."}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsx)(n.p,{children:"Example:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-tsx",children:"const {getActiveSubscriptions, activeSubscriptions} = useIAP();\n\nuseEffect(() => {\n  if (!connected) return;\n  (async () => {\n    const subs = await getActiveSubscriptions(['premium_monthly']);\n    console.log('Subs from return:', subs.length);\n    console.log('Subs from state:', activeSubscriptions.length);\n  })();\n}, [connected]);\n"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.code,{children:"hasActiveSubscriptions(subscriptionIds?) => Promise<boolean>"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"Boolean convenience check to see if any active subscriptions exist (optionally filtered by IDs)."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(n.blockquote,{children:["\n",(0,c.jsxs)(n.p,{children:["Removed in v2.9.0: ",(0,c.jsx)(n.code,{children:"purchaseHistories"})," state and ",(0,c.jsx)(n.code,{children:"getPurchaseHistories()"})," method. Use ",(0,c.jsx)(n.code,{children:"getAvailablePurchases()"})," and ",(0,c.jsx)(n.code,{children:"availablePurchases"})," instead."]}),"\n"]}),"\n",(0,c.jsx)(n.h4,{id:"getavailablepurchases",children:"getAvailablePurchases"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Type"}),": ",(0,c.jsx)(n.code,{children:"() => Promise<void>"})]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Description"}),": Fetch available purchases (restorable items) from the store"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Example"}),":"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-tsx",children:"const restorePurchases = async () => {\n  try {\n    // Updates `availablePurchases` state; do not expect a return value\n    await getAvailablePurchases();\n    // Read from state afterwards\n    console.log('Available purchases count:', availablePurchases.length);\n  } catch (error) {\n    console.error('Failed to fetch available purchases:', error);\n  }\n};\n"})}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(n.h4,{id:"validatereceipt-deprecated",children:"validateReceipt (Deprecated)"}),"\n",(0,c.jsxs)(n.blockquote,{children:["\n",(0,c.jsxs)(n.p,{children:["\u26a0\ufe0f ",(0,c.jsx)(n.strong,{children:"Deprecated"}),": Use ",(0,c.jsx)(n.code,{children:"verifyPurchase"})," instead. This function will be removed in a future version."]}),"\n"]}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"Type"}),": ",(0,c.jsx)(n.code,{children:"(options: VerifyPurchaseProps) => Promise<VerifyPurchaseResult>"})]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"Description"}),": Validate a purchase receipt using platform-specific verification"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"Parameters"}),":","\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"options"})," (object): Platform-specific verification parameters","\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"apple?"})," (object): Apple App Store verification options","\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"sku"})," (string): Product SKU to validate"]}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"google?"})," (object): Google Play Store verification options","\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"sku"})," (string): Product SKU to validate"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"accessToken"})," (string): Google OAuth2 access token for API authentication"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"packageName"})," (string): Android package name (e.g., ",(0,c.jsx)(n.code,{children:"com.example.app"}),")"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"purchaseToken"})," (string): Purchase token from the purchase response"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"isSub?"})," (boolean): Whether this is a subscription purchase"]}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"horizon?"})," (object): Meta Horizon verification options","\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"sku"})," (string): SKU for the add-on item"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"accessToken"})," (string): Meta API access token"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"userId"})," (string): User ID to verify purchase for"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"Returns"}),": Promise resolving to platform-specific validation result"]}),"\n"]}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"Important Platform Differences:"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"iOS"}),": Only requires ",(0,c.jsx)(n.code,{children:"apple.sku"})," - uses StoreKit 2's built-in verification"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Android"}),": Requires all ",(0,c.jsx)(n.code,{children:"google"})," parameters - calls Google Play Developer API"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Horizon"}),": Requires all ",(0,c.jsx)(n.code,{children:"horizon"})," parameters - calls Meta's S2S API"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Example"}),":"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-tsx",children:"const validatePurchase = async (purchase: Purchase) => {\n  try {\n    // Cross-platform validation\n    const result = await validateReceipt({\n      // iOS options (only needs SKU)\n      apple: {\n        sku: purchase.productId,\n      },\n      // Android options (requires all parameters)\n      google: {\n        sku: purchase.productId,\n        packageName: purchase.packageNameAndroid ?? '',\n        purchaseToken: purchase.purchaseToken ?? '',\n        accessToken: 'your-google-api-access-token',\n        isSub: false, // Set to true for subscriptions\n      },\n    });\n\n    console.log('Validation result:', result);\n    return result;\n  } catch (error) {\n    console.error('Validation failed:', error);\n    throw error;\n  }\n};\n\n// Platform-specific examples\nconst validateIOSOnly = async (sku: string) => {\n  const result = await validateReceipt({\n    apple: {sku},\n  });\n  return result;\n};\n\nconst validateAndroidOnly = async (purchase: Purchase) => {\n  const result = await validateReceipt({\n    google: {\n      sku: purchase.productId,\n      packageName: purchase.packageNameAndroid!,\n      purchaseToken: purchase.purchaseToken!,\n      accessToken: 'your-google-api-access-token',\n      isSub: false,\n    },\n  });\n  return result;\n};\n"})}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(n.h4,{id:"getpromotedproductios",children:"getPromotedProductIOS"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Type"}),": ",(0,c.jsx)(n.code,{children:"() => Promise<any | null>"})]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Description"}),": Get the promoted product details (iOS only)"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Example"}),":"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-tsx",children:"const handlePromotedProduct = async () => {\n  const promotedProduct = await getPromotedProductIOS();\n  if (promotedProduct) {\n    console.log('Promoted product:', promotedProduct);\n    // Show custom purchase UI\n  }\n};\n"})}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(n.h4,{id:"requestpurchaseonpromotedproductios",children:"requestPurchaseOnPromotedProductIOS"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Type"}),": ",(0,c.jsx)(n.code,{children:"() => Promise<boolean>"})]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Description"}),": Complete the purchase of a promoted product (iOS only)"]}),"\n",(0,c.jsxs)(n.blockquote,{children:["\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Deprecated"}),": In StoreKit 2, promoted products can be purchased directly via the standard ",(0,c.jsx)(n.code,{children:"requestPurchase()"})," flow. Use ",(0,c.jsx)(n.code,{children:"promotedProductListenerIOS"})," to receive the product ID when a user taps a promoted product, then call ",(0,c.jsx)(n.code,{children:"requestPurchase()"})," with the received SKU directly."]}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Example"}),":"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-tsx",children:"// Recommended approach (StoreKit 2)\npromotedProductListenerIOS(async (product) => {\n  await requestPurchase({\n    request: { apple: { sku: product.id } },\n    type: 'in-app',\n  });\n});\n\n// Legacy approach (deprecated)\nconst completePurchase = async () => {\n  try {\n    const success = await requestPurchaseOnPromotedProductIOS();\n    if (success) {\n      console.log('Promoted product purchase completed');\n    }\n  } catch (error) {\n    console.error('Failed to purchase promoted product:', error);\n  }\n};\n"})}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"platform-specific-usage",children:"Platform-Specific Usage"}),"\n",(0,c.jsx)(n.h3,{id:"ios-example",children:"iOS Example"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-tsx",children:"const IOSPurchaseExample = () => {\n  const {connected, products, requestPurchase, validateReceipt} = useIAP({\n    onPurchaseSuccess: async (purchase) => {\n      // Validate receipt on iOS\n      const validation = await validateReceipt(purchase.productId);\n      if (validation.isValid) {\n        unlockContent(purchase.productId);\n      }\n    },\n  });\n\n  const buyProduct = (product: Product) => {\n    requestPurchase({\n      request: {\n        apple: {sku: product.id},\n        google: {skus: [product.id]},\n      },\n      type: 'in-app',\n    });\n  };\n\n  return (\n    <View>\n      {products\n        .filter((p) => p.platform === 'ios')\n        .map((product) => (\n          <Button\n            key={product.id}\n            title={`${product.title} - ${product.displayPrice}`}\n            onPress={() => buyProduct(product)}\n          />\n        ))}\n    </View>\n  );\n};\n"})}),"\n",(0,c.jsx)(n.h3,{id:"android-example",children:"Android Example"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-tsx",children:"const AndroidPurchaseExample = () => {\n  const {connected, products, requestPurchase} = useIAP({\n    onPurchaseSuccess: (purchase) => {\n      // Android purchases are automatically validated by Google Play\n      unlockContent(purchase.productId);\n    },\n  });\n\n  const buyProduct = (product: Product) => {\n    requestPurchase({\n      request: {\n        apple: {sku: product.id},\n        google: {skus: [product.id]},\n      },\n      type: 'in-app',\n    });\n  };\n\n  return (\n    <View>\n      {products\n        .filter((p) => p.platform === 'android')\n        .map((product) => (\n          <Button\n            key={product.id}\n            title={`${product.title} - ${product.displayPrice}`}\n            onPress={() => buyProduct(product)}\n          />\n        ))}\n    </View>\n  );\n};\n"})}),"\n",(0,c.jsx)(n.h2,{id:"error-handling",children:"Error Handling"}),"\n",(0,c.jsxs)(n.p,{children:["The ",(0,c.jsx)(n.code,{children:"useIAP"})," hook integrates with the centralized error handling system:"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-tsx",children:"const {requestPurchase} = useIAP({\n  onPurchaseError: (error) => {\n    // Error is automatically typed as PurchaseError\n    switch (error.code) {\n      case ErrorCode.UserCancelled:\n        // Don't show error for user cancellation\n        break;\n      case ErrorCode.NetworkError:\n        Alert.alert('Network Error', 'Please check your connection');\n        break;\n      case ErrorCode.ItemUnavailable:\n        Alert.alert(\n          'Item Unavailable',\n          'This item is not available for purchase',\n        );\n        break;\n      default:\n        Alert.alert('Purchase Failed', error.message);\n    }\n  },\n});\n"})}),"\n",(0,c.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,c.jsxs)(n.ol,{children:["\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:[(0,c.jsxs)(n.strong,{children:["Always check ",(0,c.jsx)(n.code,{children:"connected"})," before making IAP calls"]}),":"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-tsx",children:"useEffect(() => {\n  if (connected) {\n    fetchProducts({skus: productIds, type: 'in-app'});\n  }\n}, [connected, fetchProducts]);\n"})}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Handle loading states"}),":"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-tsx",children:"const [loading, setLoading] = useState(false);\n\nconst buyProduct = async (productId: string) => {\n  setLoading(true);\n  try {\n    await requestPurchase({\n      request: {\n        apple: {sku: productId},\n        google: {skus: [productId]},\n      },\n      type: 'in-app',\n    });\n  } finally {\n    setLoading(false);\n  }\n};\n"})}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Implement proper error handling"}),":"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-tsx",children:"const handleError = (error: PurchaseError) => {\n  // Log for debugging\n  console.error('IAP Error:', error);\n\n  // Show user-friendly message\n  if (error.code !== ErrorCode.UserCancelled) {\n    Alert.alert('Purchase Failed', error.message);\n  }\n};\n"})}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"promoted-products-ios-only",children:"Promoted Products (iOS Only)"}),"\n",(0,c.jsx)(n.p,{children:"Handle App Store promoted products when users tap on them in the App Store:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-tsx",children:"const PromotedProductExample = () => {\n  const {promotedProductIOS, requestPurchaseOnPromotedProductIOS} = useIAP({\n    onPromotedProductIOS: (product) => {\n      console.log('Promoted product detected:', product);\n    },\n    onPurchaseSuccess: (purchase) => {\n      // Recommended: handle success via callback\n    },\n    onPurchaseError: (error) => {\n      // Recommended: handle errors via callback\n    },\n  });\n\n  useEffect(() => {\n    if (promotedProductIOS) {\n      handlePromotedProduct();\n    }\n  }, [promotedProductIOS]);\n\n  const handlePromotedProduct = async () => {\n    try {\n      // Show your custom purchase UI\n      const confirmed = await showPurchaseConfirmation(promotedProductIOS);\n\n      if (confirmed) {\n        // Complete the promoted purchase\n        await requestPurchaseOnPromotedProductIOS();\n      }\n    } catch (error) {\n      console.error('Error handling promoted product:', error);\n    }\n  };\n\n  const showPurchaseConfirmation = async (product: any) => {\n    return new Promise((resolve) => {\n      Alert.alert(\n        'Purchase Product',\n        `Would you like to purchase ${product.localizedTitle} for ${product.price}?`,\n        [\n          {text: 'Cancel', onPress: () => resolve(false), style: 'cancel'},\n          {text: 'Buy', onPress: () => resolve(true)},\n        ],\n      );\n    });\n  };\n\n  return <View>{/* Your regular store UI */}</View>;\n};\n"})}),"\n",(0,c.jsx)(n.h2,{id:"see-also",children:"See Also"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.a,{href:"./error-codes",children:"Error Codes Reference"})}),"\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.a,{href:"./types",children:"Types Reference"})}),"\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.a,{href:"../api/error-handling",children:"Error Handling Guide"})}),"\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.a,{href:"../guides/lifecycle",children:"Purchase Flow Guide"})}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,c.jsx)(n,{...e,children:(0,c.jsx)(h,{...e})}):h(e)}}}]);