"use strict";(self.webpackChunkreact_native_iap_docs=self.webpackChunkreact_native_iap_docs||[]).push([[7719],{15236:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>l,metadata:()=>o,toc:()=>d});const o=JSON.parse('{"id":"installation","title":"Installation","description":"This guide will help you install and configure React Native IAP in your React Native or Expo project.","source":"@site/versioned_docs/version-14.5/installation.md","sourceDirName":".","slug":"/installation","permalink":"/react-native-iap/docs/14.5/installation","draft":false,"unlisted":false,"editUrl":"https://github.com/hyochan/react-native-iap/tree/main/docs/versioned_docs/version-14.5/installation.md","tags":[],"version":"14.5","sidebarPosition":2,"frontMatter":{"sidebar_position":2}}');var r=i(74848),s=i(28453),t=i(35159);const l={sidebar_position:2},a="Installation",c={},d=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Package Installation",id:"package-installation",level:2},{value:"For React Native CLI Projects",id:"for-react-native-cli-projects",level:3},{value:"Expo Configuration",id:"expo-configuration",level:2},{value:"Important for Expo Managed Workflow",id:"important-for-expo-managed-workflow",level:3},{value:"Store Configuration",id:"store-configuration",level:2},{value:"Real-world examples",id:"real-world-examples",level:2}];function p(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"installation",children:"Installation"})}),"\n",(0,r.jsx)(t.A,{}),"\n",(0,r.jsx)(n.p,{children:"This guide will help you install and configure React Native IAP in your React Native or Expo project."}),"\n",(0,r.jsxs)(n.admonition,{title:"Compatibility (Nitro 14.x)",type:"warning",children:[(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"react-native-iap@14.x"})," is Nitro-based and requires ",(0,r.jsx)(n.strong,{children:"React Native 0.79+"}),"."]}),(0,r.jsxs)(n.p,{children:["If you must stay on ",(0,r.jsx)(n.strong,{children:"RN 0.75.x or lower"}),", install the last pre\u2011Nitro version: ",(0,r.jsx)(n.code,{children:"npm i react-native-iap@13.1.0"}),"."]}),(0,r.jsxs)(n.p,{children:["Hitting Swift 6 C++ interop errors in Nitro (e.g. ",(0,r.jsx)(n.code,{children:"AnyMap.swift"})," using ",(0,r.jsx)(n.code,{children:"cppPart.pointee.*"}),")? Pin Swift 5.10 for the ",(0,r.jsx)(n.code,{children:"NitroModules"})," pod (see snippet below) as a temporary workaround."]}),(0,r.jsxs)(n.p,{children:["Recommended path: Upgrade to RN 0.79+, update ",(0,r.jsx)(n.code,{children:"react-native-nitro-modules"})," and ",(0,r.jsx)(n.code,{children:"nitro-codegen"})," to latest, then ",(0,r.jsx)(n.code,{children:"pod install"})," and do a clean build."]}),(0,r.jsxs)(n.p,{children:["If you're using React Native version 0.78 or using Expo, consider using ",(0,r.jsx)(n.a,{href:"https://expo-iap.hyo.dev/docs/installation",children:"expo-iap"})," instead (easier configuration by installing ",(0,r.jsx)(n.code,{children:"expo-modules-core"})," first)."]}),(0,r.jsxs)(n.p,{children:["If issues persist after upgrading or applying the Swift pin, please share a minimal repro (fresh app + ",(0,r.jsx)(n.code,{children:"package.json"})," + ",(0,r.jsx)(n.code,{children:"Podfile"}),")."]})]}),"\n",(0,r.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,r.jsx)(n.p,{children:"Before installing React Native IAP, make sure you have:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["For ",(0,r.jsx)(n.code,{children:"react-native-iap@14.x"})," (Nitro): ",(0,r.jsx)(n.strong,{children:"React Native 0.79+"})," (Expo SDK aligned with RN 0.79)"]}),"\n",(0,r.jsxs)(n.li,{children:["For older RN (0.75.x or lower): use ",(0,r.jsx)(n.code,{children:"react-native-iap@13.1.0"})," (pre\u2011Nitro)"]}),"\n",(0,r.jsx)(n.li,{children:"Node.js 16 or later"}),"\n",(0,r.jsx)(n.li,{children:"iOS 15+ for iOS apps (StoreKit 2 requirement)"}),"\n",(0,r.jsx)(n.li,{children:"Android API level 21+ for Android apps"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"package-installation",children:"Package Installation"}),"\n",(0,r.jsx)(n.p,{children:"Install the package using your favorite package manager:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"npm install react-native-iap react-native-nitro-modules\n"})}),"\n",(0,r.jsx)(n.h3,{id:"for-react-native-cli-projects",children:"For React Native CLI Projects"}),"\n",(0,r.jsx)(n.p,{children:"If you're using React Native CLI (not Expo), you need to install iOS dependencies after installing the package:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cd ios && pod install\n"})}),"\n",(0,r.jsx)(n.p,{children:"The native modules will be automatically linked during your app's build process."}),"\n",(0,r.jsx)(n.h2,{id:"expo-configuration",children:"Expo Configuration"}),"\n",(0,r.jsx)(n.h3,{id:"important-for-expo-managed-workflow",children:"Important for Expo Managed Workflow"}),"\n",(0,r.jsxs)(n.p,{children:["If you're using the Expo managed workflow, you ",(0,r.jsx)(n.strong,{children:"must"})," use a ",(0,r.jsx)(n.a,{href:"https://docs.expo.dev/versions/latest/sdk/dev-client/",children:"custom development client"})," since in-app purchases require native modules that aren't available in Expo Go."]}),"\n",(0,r.jsx)(n.p,{children:"After installing the package, you need to:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Configure expo-build-properties for Android"})," (required for Kotlin 2.0+ support):"]}),"\n",(0,r.jsxs)(n.p,{children:["Starting from version 14.0.0-rc, react-native-iap supports Google Play Billing Library v8.0.0, which requires Kotlin 2.0+. Since ",(0,r.jsx)(n.code,{children:"expo-modules-core"})," doesn't support Kotlin 2.0 yet, you need to manually configure the Kotlin version."]}),"\n",(0,r.jsxs)(n.p,{children:["Add the following to your ",(0,r.jsx)(n.code,{children:"app.json"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "expo": {\n    "plugins": [\n      "react-native-iap",\n      [\n        "expo-build-properties",\n        {\n          "android": {\n            "kotlinVersion": "2.1.20"\n          }\n        }\n      ]\n    ]\n  }\n}\n'})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Install expo-dev-client"})}),"\n",(0,r.jsxs)(n.p,{children:["Since in-app purchases require native modules that aren't available in Expo Go, you need to install expo-dev-client to create a custom development client. Learn more about ",(0,r.jsx)(n.a,{href:"https://docs.expo.dev/versions/latest/sdk/dev-client/",children:"expo-dev-client"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"npx expo install expo-dev-client\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Install the plugin and run prebuild"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"npx expo prebuild --clean\n"})}),"\n",(0,r.jsxs)(n.p,{children:["This will generate the native iOS and Android directories with the necessary configurations. Learn more about ",(0,r.jsx)(n.a,{href:"https://docs.expo.dev/guides/adopting-prebuild/",children:"adopting prebuild"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Optional: Fix iOS Folly coroutine include error"}),"\n",(0,r.jsxs)(n.p,{children:["If your iOS build fails with errors such as ",(0,r.jsx)(n.code,{children:"'folly/coro/Coroutine.h' file not found"})," from ",(0,r.jsx)(n.code,{children:"RCT-Folly/folly/Expected.h"}),", you can opt\u2011in to a workaround that disables Folly coroutine support during CocoaPods install."]}),"\n",(0,r.jsxs)(n.p,{children:["Add this flag to the ",(0,r.jsx)(n.code,{children:"react-native-iap"})," plugin options in your Expo config:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "expo": {\n    "plugins": [\n      [\n        "react-native-iap",\n        {\n          "ios": {\n            "with-folly-no-coroutines": true\n          }\n        }\n      ]\n    ]\n  }\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"Note migration:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["This option key was renamed from ",(0,r.jsx)(n.code,{children:"with-folly-no-couroutines"})," to ",(0,r.jsx)(n.code,{children:"with-folly-no-coroutines"}),". Update your Expo config accordingly. For compatibility, the plugin temporarily accepts the old key and logs a deprecation warning."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"What this does:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Injects ",(0,r.jsx)(n.code,{children:"FOLLY_NO_CONFIG=1"}),", ",(0,r.jsx)(n.code,{children:"FOLLY_CFG_NO_COROUTINES=1"}),", and ",(0,r.jsx)(n.code,{children:"FOLLY_HAS_COROUTINES=0"})," into the Podfile ",(0,r.jsx)(n.code,{children:"post_install"})," block for all Pods targets, preventing ",(0,r.jsx)(n.code,{children:"RCT-Folly"})," from including non\u2011vendored ",(0,r.jsx)(n.code,{children:"<folly/coro/*>"})," headers."]}),"\n",(0,r.jsx)(n.li,{children:"Idempotent: skips if you already set these defines yourself."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"After enabling the flag, re-run prebuild:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"npx expo prebuild\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"store-configuration",children:"Store Configuration"}),"\n",(0,r.jsx)(n.p,{children:"For detailed platform-specific configuration:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/react-native-iap/docs/14.5/getting-started/setup-ios",children:"iOS Setup"})," - iOS StoreKit configuration"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/react-native-iap/docs/14.5/getting-started/setup-android",children:"Android Setup"})," - Android Google Play Billing configuration"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"real-world-examples",children:"Real-world examples"}),"\n",(0,r.jsx)(n.p,{children:"For detailed platform-specific setup instructions, check out our real examples:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/react-native-iap/docs/14.5/examples/purchase-flow",children:"Purchase Flow"})," - Complete purchase implementation"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/react-native-iap/docs/14.5/examples/subscription-flow",children:"Subscription Flow"})," - Subscription management"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/react-native-iap/docs/14.5/examples/available-purchases",children:"Available Purchases"})," - Restore purchases"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/react-native-iap/docs/14.5/examples/offer-code",children:"Offer Code"})," - Promotional offers and codes"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(p,{...e})}):p(e)}},27856:(e,n,i)=>{i.d(n,{I:()=>r,V:()=>o});const o="https://iapkit.com",r="https://www.hyo.dev/api/ad-banner/cmjf0l2460003249hfyh029dm"},28453:(e,n,i)=>{i.d(n,{R:()=>t,x:()=>l});var o=i(96540);const r={},s=o.createContext(r);function t(e){const n=o.useContext(s);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),o.createElement(s.Provider,{value:n},e.children)}},35159:(e,n,i)=>{i.d(n,{A:()=>l});var o=i(96540),r=i(86025),s=i(27856),t=i(74848);function l({className:e="iapkit-banner",style:n}){const i=(0,r.Ay)("/img/iapkit-banner.gif"),l=(0,o.useCallback)(e=>{fetch(s.I,{method:"POST",mode:"no-cors"}).catch(()=>{})},[]);return(0,t.jsx)("div",{className:e,style:{marginTop:0,marginBottom:12,textAlign:"center",...n},children:(0,t.jsx)("a",{href:s.V,target:"_blank",rel:"noopener noreferrer",onClick:l,style:{display:"inline-block",textDecoration:"none"},children:(0,t.jsx)("img",{src:i,alt:"IapKit - In-App Purchase Validation Service",style:{border:"none",display:"block"}})})})}}}]);