"use strict";(self.webpackChunkreact_native_iap_docs=self.webpackChunkreact_native_iap_docs||[]).push([[9787],{27856:(e,n,t)=>{t.d(n,{I:()=>r,V:()=>o});const o="https://iapkit.com",r="https://www.hyo.dev/api/ad-banner/cmjf0l2460003249hfyh029dm"},28453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>a});var o=t(96540);const r={},i=o.createContext(r);function s(e){const n=o.useContext(i);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),o.createElement(i.Provider,{value:n},e.children)}},35159:(e,n,t)=>{t.d(n,{A:()=>a});var o=t(96540),r=t(86025),i=t(27856),s=t(74848);function a({className:e="iapkit-banner",style:n}){const t=(0,r.Ay)("/img/iapkit-banner.gif"),a=(0,o.useCallback)(e=>{fetch(i.I,{method:"POST",mode:"no-cors"}).catch(()=>{})},[]);return(0,s.jsx)("div",{className:e,style:{marginTop:0,marginBottom:12,textAlign:"center",...n},children:(0,s.jsx)("a",{href:i.V,target:"_blank",rel:"noopener noreferrer",onClick:a,style:{display:"inline-block",textDecoration:"none"},children:(0,s.jsx)("img",{src:t,alt:"IapKit - In-App Purchase Validation Service",style:{border:"none",display:"block"}})})})}},74994:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>m,frontMatter:()=>a,metadata:()=>o,toc:()=>l});const o=JSON.parse('{"id":"examples/offer-code","title":"Offer Code Redemption Example","description":"This guide demonstrates how to redeem App Store offer/promo codes using the native iOS sheet. This is useful for subscription promotional codes and requires a real iOS device.","source":"@site/docs/examples/offer-code.md","sourceDirName":"examples","slug":"/examples/offer-code","permalink":"/react-native-iap/docs/examples/offer-code","draft":false,"unlisted":false,"editUrl":"https://github.com/hyochan/react-native-iap/tree/main/docs/docs/examples/offer-code.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"title":"Offer Code Redemption Example","sidebar_label":"Offer Code","sidebar_position":4},"sidebar":"tutorialSidebar","previous":{"title":"Available Purchases","permalink":"/react-native-iap/docs/examples/available-purchases"},"next":{"title":"Alternative Billing","permalink":"/react-native-iap/docs/examples/alternative-billing"}}');var r=t(74848),i=t(28453),s=t(35159);const a={title:"Offer Code Redemption Example",sidebar_label:"Offer Code",sidebar_position:4},d="Offer Code Redemption",c={},l=[{value:"Usage",id:"usage",level:2},{value:"Android",id:"android",level:2},{value:"Notes",id:"notes",level:2}];function p(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"offer-code-redemption",children:"Offer Code Redemption"})}),"\n",(0,r.jsx)(s.A,{}),"\n",(0,r.jsx)(n.p,{children:"This guide demonstrates how to redeem App Store offer/promo codes using the native iOS sheet. This is useful for subscription promotional codes and requires a real iOS device."}),"\n",(0,r.jsxs)(n.admonition,{type:"tip",children:[(0,r.jsxs)(n.p,{children:["The complete working example can be found at ",(0,r.jsx)(n.a,{href:"https://github.com/hyochan/react-native-iap/blob/main/example/screens/OfferCode.tsx",children:"example/screens/OfferCode.tsx"}),"."]}),(0,r.jsx)(n.p,{children:"Note that the example code was heavily vibe-coded with Claude and is quite verbose/messy for demonstration purposes - use it as a reference only."})]}),"\n",(0,r.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"import {Platform, Button} from 'react-native';\nimport {presentCodeRedemptionSheetIOS} from 'react-native-iap';\n\nfunction OfferCodeButton() {\n  const onPress = async () => {\n    if (Platform.OS !== 'ios') return;\n    try {\n      await presentCodeRedemptionSheetIOS();\n      // The system sheet is presented; no result is returned\n    } catch (e) {\n      console.warn('Failed to present offer code sheet:', e);\n    }\n  };\n\n  return <Button title=\"Redeem Offer Code\" onPress={onPress} />;\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"android",children:"Android"}),"\n",(0,r.jsx)(n.p,{children:"Android does not support an in\u2011app offer code redemption sheet. Instead, direct users to the Google Play redeem page, then refresh entitlements in your app."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"import {Platform, Button, Linking} from 'react-native';\nimport {useIAP} from 'react-native-iap';\n\nfunction RedeemOrRefresh() {\n  const {getAvailablePurchases, getActiveSubscriptions} = useIAP();\n\n  const onPress = async () => {\n    if (Platform.OS === 'android') {\n      // Open Play redeem (web/Store)\n      await Linking.openURL('https://play.google.com/redeem');\n      // After redeeming, have users come back and refresh\n      await Promise.all([getAvailablePurchases(), getActiveSubscriptions()]);\n    }\n  };\n\n  return <Button title=\"Redeem (Android)\" onPress={onPress} />;\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"notes",children:"Notes"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Platform: iOS only; requires a real device (not supported on simulators)"}),"\n",(0,r.jsx)(n.li,{children:"App Store Connect: Offer codes must be configured for your subscription"}),"\n",(0,r.jsxs)(n.li,{children:["See also: Core Methods \u2192 iOS Specific \u2192 ",(0,r.jsx)(n.code,{children:"presentCodeRedemptionSheetIOS()"})]}),"\n",(0,r.jsxs)(n.li,{children:["Android: Use Google Play redeem flow via ",(0,r.jsx)(n.code,{children:"Linking.openURL('https://play.google.com/redeem')"})," and then refresh with ",(0,r.jsx)(n.code,{children:"getAvailablePurchases()"})," and ",(0,r.jsx)(n.code,{children:"getActiveSubscriptions()"})]}),"\n"]})]})}function m(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(p,{...e})}):p(e)}}}]);