---
slug: release-14.5.1
title: Release 14.5.1 - Android One-Time Product Discounts
authors: [hyochan]
tags: [release, android, discounts, billing-library]
description: React Native IAP 14.5.1 adds full support for Google Play one-time product discounts and new purchase status fields from Billing Library 8.1.0+.
date: 2025-12-11
---

# React Native IAP 14.5.1

React Native IAP 14.5.1 brings **full support for Google Play one-time product discounts** introduced in Billing Library 7.0+, along with new purchase status fields from Billing Library 8.1.0+.

<!-- truncate -->

:::note Small Breaking Change
This release contains a small breaking change: `oneTimePurchaseOfferDetailsAndroid` is now an **array** instead of a single object. We apologize for including this in a patch release—since 14.5.0 was just released, we opted to include this as a minor patch rather than bumping to 15.0.0. Please update your code accordingly if you access this field directly.
:::

## What's New

### One-Time Product Discount Support

Google Play Billing Library 7.0+ introduced the ability to offer discounts on one-time (non-subscription) products. This release fully supports these discount features through the new `oneTimePurchaseOfferDetailsAndroid` array.

Each offer in the array can contain:

- **Discount Display Info** - Percentage discount or absolute discount amount
- **Limited Quantity Info** - Maximum and remaining quantity for limited offers
- **Valid Time Window** - Start and end times for time-limited offers
- **Pre-order Details** - Release time for pre-order products
- **Rental Details** - Rental period and expiration for rental products

### New `isSuspendedAndroid` Field

For subscriptions, we've added the `isSuspendedAndroid` field from Billing Library 8.1.0+. This indicates whether a subscription is currently suspended (e.g., due to payment issues during a grace period).

## Breaking Change

### `oneTimePurchaseOfferDetailsAndroid` is now an Array

**Before (14.5.0):**
```typescript
const offer = product.oneTimePurchaseOfferDetailsAndroid;
// offer is a single object or null
```

**After (14.5.1):**
```typescript
const offers = product.oneTimePurchaseOfferDetailsAndroid;
// offers is an array or null
const firstOffer = offers?.[0];
```

If you were accessing the price directly, update your code:

```typescript
// Before
const price = product.oneTimePurchaseOfferDetailsAndroid?.formattedPrice;

// After
const price = product.oneTimePurchaseOfferDetailsAndroid?.[0]?.formattedPrice;
```

## New Types

### ProductAndroidOneTimePurchaseOfferDetail

```typescript
interface ProductAndroidOneTimePurchaseOfferDetail {
  formattedPrice: string;
  priceAmountMicros: string;
  priceCurrencyCode: string;
  offerId?: string | null;
  offerToken: string;
  offerTags: string[];
  // Discount fields (Billing Library 7.0+)
  fullPriceMicros?: string | null;
  discountDisplayInfo?: DiscountDisplayInfoAndroid | null;
  limitedQuantityInfo?: LimitedQuantityInfoAndroid | null;
  validTimeWindow?: ValidTimeWindowAndroid | null;
  preorderDetailsAndroid?: PreorderDetailsAndroid | null;
  rentalDetailsAndroid?: RentalDetailsAndroid | null;
}
```

### Discount Types

```typescript
interface DiscountDisplayInfoAndroid {
  percentageDiscount?: number | null;
  discountAmount?: DiscountAmountAndroid | null;
}

interface DiscountAmountAndroid {
  discountAmountMicros: string;
  formattedDiscountAmount: string;
}

interface LimitedQuantityInfoAndroid {
  maximumQuantity: number;
  remainingQuantity: number;
}

interface ValidTimeWindowAndroid {
  startTimeMillis: string;
  endTimeMillis: string;
}
```

## Usage Example

```typescript
import {useIAP} from 'react-native-iap';

const {products} = useIAP();

// Display one-time product offers with discounts
products.forEach(product => {
  if (product.platform === 'android' && product.oneTimePurchaseOfferDetailsAndroid) {
    product.oneTimePurchaseOfferDetailsAndroid.forEach((offer, index) => {
      console.log(`Offer ${index + 1}: ${offer.formattedPrice}`);

      if (offer.discountDisplayInfo?.percentageDiscount) {
        console.log(`  ${offer.discountDisplayInfo.percentageDiscount}% off!`);
      }

      if (offer.limitedQuantityInfo) {
        console.log(`  ${offer.limitedQuantityInfo.remainingQuantity} remaining`);
      }

      if (offer.validTimeWindow) {
        const endDate = new Date(Number(offer.validTimeWindow.endTimeMillis));
        console.log(`  Valid until: ${endDate.toLocaleDateString()}`);
      }
    });
  }
});
```

## OpenIAP Updates

- **openiap-google**: 1.3.10 → 1.3.11
- **openiap-gql**: 1.3.0 → 1.3.1

## Installation

```bash
npm install react-native-iap@14.5.1
# or
yarn add react-native-iap@14.5.1
# or
bun add react-native-iap@14.5.1
```

## References

- [Google Play Billing Library 8.1.0 Release Notes](https://developer.android.com/google/play/billing/release-notes#8-1-0)
- [Google Play One-Time Product Discounts](https://developer.android.com/google/play/billing/integrate#one-time-discounts)
- [Types Documentation](/docs/api/types)

Questions or feedback? Reach out via [GitHub issues](https://github.com/hyochan/react-native-iap/issues).
