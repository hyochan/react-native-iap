---
slug: release-14-1-0
title: v14.1.0 - Type System Improvements & API Enhancements
authors: [hyochan]
tags: [release, react-native-iap, types, api]
date: 2025-09-06
---

We're excited to announce React Native IAP 14.1.0 with significant type system improvements and API enhancements! üöÄ

‚ö†Ô∏è **Note: This release contains breaking changes. Please review the migration guide carefully.**

<!-- truncate -->

## ‚ö†Ô∏è Breaking Changes

### 1. Platform-Specific Field Naming
All platform-specific fields now have platform suffixes for clarity.

### 2. API Method Changes
- `showManageSubscriptionsIOS()` return type changed from `Promise<boolean>` to `Promise<NitroPurchase[]>`
- `validateReceipt()` method signature has been updated

### 3. Type System Updates
Several type definitions have been restructured for better type safety.

## What's New in v14.1.0

### üéØ Enhanced Type System

#### Platform-Specific Field Naming Convention
All platform-specific fields now follow a consistent naming pattern with platform suffixes:

**iOS fields now end with `IOS`:**
- `isFamilyShareable` ‚Üí `isFamilyShareableIOS`
- `jsonRepresentation` ‚Üí `jsonRepresentationIOS`
- New: `typeIOS` for detailed iOS product types

**Android fields now end with `Android`:**
- `originalPrice` ‚Üí `originalPriceAndroid`
- `introductoryPriceValue` ‚Üí `introductoryPriceValueAndroid`
- `subscriptionPeriod` ‚Üí `subscriptionPeriodAndroid`

This change makes it immediately clear which fields are platform-specific, improving code maintainability and reducing confusion.

### üîÑ Common Purchase Fields

Added new common fields to the `PurchaseCommon` type for better cross-platform consistency:
- `quantity: number` - Purchase quantity (defaults to 1)
- `purchaseState: PurchaseState` - Unified purchase state across platforms
- `isAutoRenewing: boolean` - Auto-renewal status for subscriptions

### üì± iOS Product Types

Introduced `ProductTypeIOS` enum for more granular iOS product categorization:
```typescript
enum ProductTypeIOS {
  consumable = 'consumable',
  nonConsumable = 'nonConsumable',
  autoRenewableSubscription = 'autoRenewableSubscription',
  nonRenewingSubscription = 'nonRenewingSubscription',
}
```

### üîÑ Purchase States

New unified `PurchaseState` enum for consistent purchase status handling:
```typescript
enum PurchaseState {
  pending = 'pending',      // Android: waiting for payment confirmation
  purchased = 'purchased',  // Both: successfully purchased
  failed = 'failed',        // Both: purchase failed/revoked
  restored = 'restored',    // iOS only: restored from previous purchase
  deferred = 'deferred',    // iOS only: waiting for parental approval
  unknown = 'unknown',      // Both: unspecified state
}
```

**Platform Notes:**
- **iOS**: StoreKit 2 primarily uses `purchased` state for verified transactions. `restored` and `deferred` states are handled through separate flows.
- **Android**: Supports `pending` (awaiting payment), `purchased` (completed), and `unknown` (unspecified) states directly from the Play Billing Library.

### üìã API Method Updates

#### showManageSubscriptionsIOS()
The `showManageSubscriptionsIOS()` method now returns updated subscription information:
```typescript
// Before: Promise<boolean>
// Now: Promise<NitroPurchase[]>
const updatedSubscriptions = await showManageSubscriptionsIOS();
```

This allows you to get real-time subscription status updates after users modify their subscriptions.

## Migration Guide

### Updating Type References

If you're accessing platform-specific fields, update your code:

```typescript
// Before
if (product.isFamilyShareable) { }
if (product.originalPrice) { }

// After
if (product.isFamilyShareableIOS) { }
if (product.originalPriceAndroid) { }
```

### Using New Purchase States

```typescript
import { PurchaseState } from 'react-native-iap';

if (purchase.purchaseState === PurchaseState.purchased) {
  // Handle successful purchase
} else if (purchase.purchaseState === PurchaseState.pending) {
  // Handle pending purchase
}
```

### Handling showManageSubscriptionsIOS Response

```typescript
// Before
const success = await showManageSubscriptionsIOS();
if (success) {
  // Refresh subscriptions manually
}

// After
const updatedSubscriptions = await showManageSubscriptionsIOS();
// Use the returned subscription data directly
updatedSubscriptions.forEach(sub => {
  console.log('Updated subscription:', sub.productId, sub.isAutoRenewing);
});
```

## Benefits

### ‚úÖ Improved Type Safety
Platform-specific fields are now clearly marked, reducing runtime errors from accessing wrong platform fields.

### ‚úÖ Better Developer Experience
Consistent naming conventions make the API more predictable and easier to use.

### ‚úÖ Enhanced Cross-Platform Support
Common fields like `purchaseState` and `isAutoRenewing` provide unified interfaces across platforms.

### ‚úÖ More Detailed Information
New enums and return types provide richer information about products and purchases.

## Upgrading

```bash
npm install react-native-iap react-native-nitro-modules
```

## Community

Thank you to all contributors who helped make this release possible! 

For questions or issues, please visit our [GitHub repository](https://github.com/hyochan/react-native-iap).