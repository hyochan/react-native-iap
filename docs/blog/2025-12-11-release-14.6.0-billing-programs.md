---
slug: release-14.6.0
title: Release 14.6.0 - Billing Programs API & Android Discounts
authors: [hyochan]
tags: [release, android, billing-programs, discounts, billing-library]
description: React Native IAP 14.6.0 adds Google Play Billing Programs API from Billing Library 8.2.0+ along with full support for one-time product discounts.
date: 2025-12-11
---

# React Native IAP 14.6.0

React Native IAP 14.6.0 brings the **new Billing Programs API** from Google Play Billing Library 8.2.0+, allowing developers to use External Content Links and External Offers. This release also includes full support for **one-time product discounts** from Billing Library 7.0+ and new purchase status fields from Billing Library 8.1.0+.

<!-- truncate -->

:::note Small Breaking Change from 14.5.0
`oneTimePurchaseOfferDetailsAndroid` is now an **array** instead of a single object. Please update your code accordingly if you access this field directly.
:::

## What's New

### Billing Programs API (Android 8.2.0+)

[Google Play Billing Library 8.2.0](https://developer.android.com/google/play/billing/release-notes#8-2-0), released on December 9, 2025, introduces the new **Billing Programs API** that replaces the deprecated alternative billing APIs. This API supports:

- **External Content Links** - For eligible apps to link to external content
- **External Offers** - For eligible apps to offer purchases outside Google Play

#### New Methods

```typescript
// Enable a billing program BEFORE calling initConnection
enableBillingProgramAndroid('external-offer');
await initConnection();

// Check if the program is available for this user
const result = await isBillingProgramAvailableAndroid('external-offer');
if (result.isAvailable) {
  // Program is available
}

// Get reporting details for external transactions
const details = await createBillingProgramReportingDetailsAndroid('external-offer');
// Use details.externalTransactionToken to report transactions

// Launch external link
const success = await launchExternalLinkAndroid({
  billingProgram: 'external-offer',
  launchMode: 'launch-in-external-browser-or-app',
  linkType: 'link-to-digital-content-offer',
  linkUri: 'https://your-website.com/purchase',
});
```

### One-Time Product Discount Support

Google Play Billing Library 7.0+ introduced the ability to offer discounts on one-time (non-subscription) products. This release fully supports these discount features through the new `oneTimePurchaseOfferDetailsAndroid` array.

Each offer in the array can contain:

- **Discount Display Info** - Percentage discount or absolute discount amount
- **Limited Quantity Info** - Maximum and remaining quantity for limited offers
- **Valid Time Window** - Start and end times for time-limited offers
- **Pre-order Details** - Release time for pre-order products
- **Rental Details** - Rental period and expiration for rental products

### Subscription Replacement Improvements (Android 8.1.0+)

New per-product subscription replacement configuration with `SubscriptionProductReplacementParamsAndroid`:

```typescript
interface SubscriptionProductReplacementParamsAndroid {
  oldProductId: string;
  replacementMode: SubscriptionReplacementModeAndroid;
}
```

Also adds the new **`KeepExisting`** replacement mode from Billing Library 8.1.0+, which keeps the existing payment schedule unchanged during subscription upgrades/downgrades.

### New `isSuspendedAndroid` Field

For subscriptions, we've added the `isSuspendedAndroid` field from Billing Library 8.1.0+. This indicates whether a subscription is currently suspended (e.g., due to payment issues during a grace period).

## Breaking Changes

### `verifyPurchase` / `validateReceipt` API Restructured

The `verifyPurchase` and `validateReceipt` APIs have been refactored to use platform-specific options. The `sku` field has been moved from the root level into each platform's options object, and `androidOptions` has been replaced with `google`.

**Before (14.5.0):**

```typescript
// iOS
await verifyPurchase({sku: 'premium_monthly'});

// Android
await verifyPurchase({
  sku: 'premium_monthly',
  androidOptions: {
    packageName: 'com.example.app',
    productToken: 'token...',
    accessToken: 'oauth_token...',
    isSub: true,
  },
});
```

**After (14.6.0):**

```typescript
// Provide all platform options - library handles platform detection internally
await verifyPurchase({
  apple: {sku: 'premium_monthly'},
  google: {
    sku: 'premium_monthly',
    packageName: 'com.example.app',
    purchaseToken: 'token...', // renamed from productToken
    accessToken: 'oauth_token...',
    isSub: true,
  },
  // Optional: Meta Quest support
  horizon: {
    sku: '50_gems',
    userId: '123456789',
    accessToken: 'OC|app_id|app_secret',
  },
});
```

**Key Changes:**

- `sku` moved from root level → inside each platform options (`apple.sku`, `google.sku`, `horizon.sku`)
- `androidOptions` renamed → `google`
- `productToken` renamed → `purchaseToken` (in google options)
- New `horizon` options added for Meta Quest verification
- No need for `Platform.OS` checks - provide all options and let the library handle it

### `oneTimePurchaseOfferDetailsAndroid` is now an Array

**Before (14.5.0):**

```typescript
const offer = product.oneTimePurchaseOfferDetailsAndroid;
// offer is a single object or null
```

**After (14.6.0):**

```typescript
const offers = product.oneTimePurchaseOfferDetailsAndroid;
// offers is an array or null
const firstOffer = offers?.[0];
```

If you were accessing the price directly, update your code:

```typescript
// Before
const price = product.oneTimePurchaseOfferDetailsAndroid?.formattedPrice;

// After
const price = product.oneTimePurchaseOfferDetailsAndroid?.[0]?.formattedPrice;
```

## New Types

### Billing Programs Types

```typescript
type BillingProgramAndroid =
  | 'unspecified'
  | 'external-content-link'
  | 'external-offer';

type ExternalLinkLaunchModeAndroid =
  | 'unspecified'
  | 'launch-in-external-browser-or-app'
  | 'caller-will-launch-link';

type ExternalLinkTypeAndroid =
  | 'unspecified'
  | 'link-to-digital-content-offer'
  | 'link-to-app-download';

interface LaunchExternalLinkParamsAndroid {
  billingProgram: BillingProgramAndroid;
  launchMode: ExternalLinkLaunchModeAndroid;
  linkType: ExternalLinkTypeAndroid;
  linkUri: string;
}

interface BillingProgramAvailabilityResultAndroid {
  billingProgram: BillingProgramAndroid;
  isAvailable: boolean;
}

interface BillingProgramReportingDetailsAndroid {
  billingProgram: BillingProgramAndroid;
  externalTransactionToken: string;
}
```

### ProductAndroidOneTimePurchaseOfferDetail

```typescript
interface ProductAndroidOneTimePurchaseOfferDetail {
  formattedPrice: string;
  priceAmountMicros: string;
  priceCurrencyCode: string;
  offerId?: string | null;
  offerToken: string;
  offerTags: string[];
  // Discount fields (Billing Library 7.0+)
  fullPriceMicros?: string | null;
  discountDisplayInfo?: DiscountDisplayInfoAndroid | null;
  limitedQuantityInfo?: LimitedQuantityInfoAndroid | null;
  validTimeWindow?: ValidTimeWindowAndroid | null;
  preorderDetailsAndroid?: PreorderDetailsAndroid | null;
  rentalDetailsAndroid?: RentalDetailsAndroid | null;
}
```

## New Types

### VerifyPurchase Platform-Specific Types

```typescript
interface VerifyPurchaseAppleOptions {
  sku: string; // Product SKU to validate
}

interface VerifyPurchaseGoogleOptions {
  sku: string; // Product SKU to validate
  accessToken: string; // OAuth access token from your backend
  packageName: string; // Android package name
  purchaseToken: string; // Purchase token from the purchase
  isSub?: boolean; // Whether this is a subscription
}

interface VerifyPurchaseHorizonOptions {
  sku: string; // Product SKU to validate
  userId: string; // Meta Horizon user ID
  accessToken: string; // Meta access token (OC|app_id|app_secret)
}

interface VerifyPurchaseProps {
  apple?: VerifyPurchaseAppleOptions;
  google?: VerifyPurchaseGoogleOptions;
  horizon?: VerifyPurchaseHorizonOptions;
}
```

## Deprecated Methods

The following methods are deprecated in favor of the new Billing Programs API:

| Deprecated Method | Replacement | Documentation |
|-------------------|-------------|---------------|
| [`checkAlternativeBillingAvailabilityAndroid()`](/docs/api/methods/core-methods#checkalternativebillingavailabilityandroid) | [`isBillingProgramAvailableAndroid()`](/docs/next/api/methods/core-methods#isbillingprogramavailableandroid) | Check billing program availability |
| [`showAlternativeBillingDialogAndroid()`](/docs/api/methods/core-methods#showalternativebillingdialogandroid) | [`launchExternalLinkAndroid()`](/docs/next/api/methods/core-methods#launchexternallinkandroid) | Launch external billing flow |
| [`createAlternativeBillingTokenAndroid()`](/docs/api/methods/core-methods#createalternativebillingtokenandroid) | [`createBillingProgramReportingDetailsAndroid()`](/docs/next/api/methods/core-methods#createbillingprogramreportingdetailsandroid) | Get external transaction token |
| `replacementModeAndroid` parameter | `subscriptionProductReplacementParams` | Per-product replacement configuration |

These deprecated methods will continue to work but will be removed in a future major version. We recommend migrating to the new Billing Programs API.

## OpenIAP Updates

- **openiap-apple**: [1.3.0 → 1.3.2](https://github.com/hyodotdev/openiap/compare/apple-v1.3.0...apple-v1.3.2)
- **openiap-google**: [1.3.12 → 1.3.14](https://github.com/hyodotdev/openiap/compare/google-v1.3.12...google-v1.3.14)
- **openiap-gql**: [1.3.2 → 1.3.4](https://github.com/hyodotdev/openiap/compare/gql-v1.3.2...gql-v1.3.4)

## Early Access Installation

Version 14.6 is currently available as a preview release. Install with the `@next` tag:

```bash
npm install react-native-iap@next react-native-nitro-modules
# or
yarn add react-native-iap@next react-native-nitro-modules
# or
bun add react-native-iap@next react-native-nitro-modules
```

This version is available via `npm install react-native-iap@next react-native-nitro-modules`. Check out the [documentation](/docs/next/intro) for details on all features.

## References

- [Google Play Billing Library 8.2.0 Release Notes](https://developer.android.com/google/play/billing/release-notes#8-2-0)
- [Google Play Billing Programs](https://developer.android.com/google/play/billing/billing-programs)
- [Google Play One-Time Product Discounts](https://developer.android.com/google/play/billing/integrate#one-time-discounts)
- [Types Documentation](/docs/api/types)

Questions or feedback? Reach out via [GitHub issues](https://github.com/hyochan/react-native-iap/issues).
